{-# LANGUAGE GADTs #-}
{-# OPTIONS_GHC -Wno-orphans #-}

module Language.Marlowe.Runtime.Core.ScriptRegistry
  where

import Cardano.Api (AsType(..), NetworkId(..), NetworkMagic(..), PlutusScript, PlutusScriptV2, SerialiseAsCBOR(..))
import Data.Aeson (ToJSON(..))
import Data.ByteString (ByteString)
import Data.ByteString.Base16 (decodeBase16)
import Data.Foldable (asum)
import Data.Map (Map)
import qualified Data.Map as Map
import Data.Maybe (fromJust)
import Data.Set (Set)
import qualified Data.Set as Set
import qualified Data.Text as T
import Language.Marlowe.Runtime.ChainSync.Api (Assets(..), Datum(..), ScriptHash, TxOutRef, fromBech32)
import qualified Language.Marlowe.Runtime.ChainSync.Api as Chain
import Language.Marlowe.Runtime.Core.Api

instance Ord NetworkId where
  compare Mainnet Mainnet = EQ
  compare Mainnet _ = LT
  compare _ Mainnet = GT
  compare (Testnet (NetworkMagic a)) (Testnet (NetworkMagic b)) =
    compare a b

data ReferenceScriptUtxo = ReferenceScriptUtxo
  { txOutRef :: TxOutRef
  , txOut :: Chain.TransactionOutput
  , script :: PlutusScript PlutusScriptV2
  } deriving (Show, Eq, Ord)

instance ToJSON ReferenceScriptUtxo where
  toJSON ReferenceScriptUtxo{..} = toJSON txOutRef

-- | A set of script hashes for a marlowe version.
data MarloweScripts = MarloweScripts
  { marloweScript :: ScriptHash
  , payoutScript :: ScriptHash
  , marloweScriptUTxOs :: Map NetworkId ReferenceScriptUtxo
  , payoutScriptUTxOs :: Map NetworkId ReferenceScriptUtxo
  } deriving (Show, Eq, Ord)

mainnetNetworkId :: NetworkId
mainnetNetworkId = Mainnet

preprodNetworkId :: NetworkId
preprodNetworkId = Testnet $ NetworkMagic 1

previewNetworkId :: NetworkId
previewNetworkId = Testnet $ NetworkMagic 2

-- | The current pair of static script hashes for Marlowe V1 as of the current git
-- commit. Enforced in the test suite for the Marlowe Runtime.
--
-- STOP Are you here to change this value to fix a test failure? Before you do
-- so, please copy the current value into 'v1Scripts' before updating
-- it to the new one (unless you are certain that the address here has never
-- been published).
--
-- DO NOT ALTER THE FOLLOWING VALUE UNLESS YOU ARE COMMITTING
-- APPROVED CHANGES TO MARLOWE'S SCRIPT REGISTRY. THIS VALUE HAS
-- IMPLICATIONS FOR VERSIONING, SECURITY, AND CONTRACT DISCOVERY.
currentV1Scripts :: MarloweScripts
currentV1Scripts = MarloweScripts
  { marloweScript = "e4583564124dc98ebe93bf76c32622c816e92371ca56dc6b2c125b72"
  , payoutScript = "49076eab20243dc9462511fb98a9cfb719f86e9692288139b7c91df3"
  , marloweScriptUTxOs = Map.fromList []
  , payoutScriptUTxOs = Map.fromList []
  }

currentV1MarloweScriptCBOR :: ByteString
currentV1MarloweScriptCBOR = either (error . T.unpack) id $ decodeBase16 "59302959302601000033232323322323232332232332232323232323232323232323232323232323232323232323232323322332232323232323233223232323232323232323232323322332232323232323232323232323232323232323232323232323232323232323232323232323232323232323232323233223232323232323232323232322322223232533533322235003223223500523232323232323223353235001223500223223355335333573466e2000400c2400423c044c0b4c8488c00400ccd541f400c00454cd4ccd5cd19b8800150110900108f011302d3322122330020040035011335507d0030011332212233001004003335507d500200135012222233330800100400300250062302c122222300200622533335333333305509101002001012006509a01509a011302d1222220051302d1222220031302d12222200422222153350051333303100400300200115333333501722130340351350192222533533335530781200150602209c0100409b011303603713333035008007006005222130350362221303503622222130370382221303503615335333573466e24005403c23804234045403c4004cc8848cc00400c0094cd4c8d400488d4008894ccd400884d4010894ccd400884d425804cd5420004cdc099b8000448008c0c4014cdc019b8100148008c0c40085425004542500454244045424404d40248888888888880148400459401c94ccccd400458585884cd4004898985888c8c8c8c8c8c8894cd4ccc131241016900500e0161533533355307112001350545053253335001221350022230170012222130170031095015010153353335530711200135054505323500122335002223330560610033335530761200150522350012222003333553071120012253353308b0135002222200400313350a201002001100150a1015011233355307512001350735077235001222253335002109c012109d0121533533305b22333573466e2000800427c042800401002054cd54cd4cc0d8c8d400488cdd2a400066ae80dd480119aba037520026ec42a804cd5422c0408401c07484cc240040040084274044cc23804014cc27c04c28c040ad4280044274044274054041402054cd54cccccd40048854cd4d54cd4ccd54c1b848004894cd4d40088888cc2300540540104cd427c0400800440054278054038588854cd40044008885888894ccd40084264048426804854cd4ccc16023404011402854cd54cd4cc0ccc100ccc10407802402006884cc234040040084268044cc22c0401540504268044268044ccc139241016f005005004109501133355307112001350545053253353308501350012222004500e109401109501500c2221533535533533355306f120012253353500222223308d01501600413350a0010020011001509f01500f16221533500110022216222253335002109a012109b0121533533305908e01004500c15335533533034304133304201f00a00901b213308e01001002109b0113308c010055015109b01109b01133304f491016f0050070051096012221533535533533355306f120012253353500222223308d01501600413350a0010020011001509f01500f16221533500110022216222253335002109a012109b0121533533305908e01004500d15335533533034304133304201f00a00901b213308e01001002109b0113308c010055015109b01109b01133304f491016f0050080051096012222215335355335333553071120012253353500222223308f01501800413350a201002001100150a101501116221533500110022216222253335002109c012109d0121533533305b09001004501015335533533036304333304402100c00b01d213309001001002109d0113308e010055017109d01109d011333051491016f00500b0071098012221533535533533355306f120012253353500222223308d01501600413350a0010020011001509f01500f16221533500110022216222253335002109a012109b0121533533305908e01004500f15335533533034304133304201f00a00901b213308e01001002109b0113308c010055015109b01109b01133304f491016f00500a0051096011533533335530711200150592209501500809401109401135500f222001109301109301109301109301133304c04d33304c04d500b33355306e12001504a253335001221509c012222135002225335333573466e2400d20000970109801133509f0133550850100233509f0133550850100100350a00150a001150a0011509a01500d3303803933355306e12001504a5501f5005133304b04c33304b04c500a33355306d120015049253335001221509b012222135002225335333573466e2400d20000960109701133509e0133550840100233509e01335508401001003509f01509f011509f011509901500c3303703833355306d1200150495501e5004133304a04b33304a04b500933355306c120015048253335001221509a012222135002225335333573466e2400d20000950109601133509d0133550830100233509d01335508301001003509e01509e011509e011509801500b3303603733355306c1200150485501d5003133304904a33304904a500833355306b1200150472533350012215099012222135002225335333573466e2400d20000940109501133509c0133550820100233509c01335508201001003509d01509d011509d011509701500a3303503633355306b1200150475501c50021333048049333048049500733355306a1200150462533350012215098012222135002225335333573466e2400d20000930109401133509b0133550810100233509b01335508101001003509c01509c011509c01150960150093303403533355306a1200150465501b50011333553069120013233506b335506307c001509501504623500122223350032509a01235003225335333573466e2401120000930109401133509b0133550810100333509b0133550810100233509b01335508101001004509c01509c01509c011509c0100113500722222222222200a13550022220021353535500122200322001222200313553353500922350022222222222223333500d250960125096012509601233355307112001502d2533535001225335333573466e3cd400888008d40108800825c04258044ccd5cd19b8735002220013500422001097010960110960113509801001150970100d213333048235002223500122223500422335002208f012330810100100a508801086013500522222222222200c1622350022235001222233355505f0080040071335530601200123350012220032001500113355305f120012335001212230010032232533535006222222222222300d002213212233300200700600330270011632001355090012253350011508a0122135002225335333573466e3c00801c2300422c044d423c040044c01800c0208cd400488d400488cd40088d401c8888888888894cd4ccd54c1c44800540b494cd4ccd5cd19b8f00e00109501094011350980100115097010042109501109301208701233304104c33508b01335507100733508b01335507100148009423005423004d400c888888888888ccd54c1b44800541248d400488d4004888800c0304d40048888004c8c8c8cccd5cd19b8735573aa0069000119981219191999ab9a3370e6aae75400520002375c6ae84d55cf28011193190458099ab9c03403308901137540026ae85400cc8c8c8c8c8cccd5cd19b8735573aa008900011999838199aa80b119191999ab9a3370e6aae754009200023355075303335742a00460726ae84d5d128011193190490099ab9c03b03a09001135573ca00226ea8005d69aba150043335501602e75a6ae85400cccd540580a1d69aba15002375a6ae84d5d128011193190470099ab9c03703608c01135744a00226ae8940044d55cf280089baa00135742a004603a6ae84d5d128011193190440099ab9c03103008601135744a00226aae7940044dd500298030021999ab9a3370e6aae7540092000233221233001003002323232323232323232323232323333573466e1cd55cea8062400046666666666664444444444442466666666666600201a01801601401201000e00c00a00800600466a0540306ae854030cd40a8060d5d0a80599a81500c9aba1500a3335501b75ca0346ae854024ccd5406dd7280d1aba1500833502a01f35742a00e666aa03606eeb4d5d0a8031919191999ab9a3370e6aae75400920002332212330010030023232323333573466e1cd55cea8012400046644246600200600466a050eb4d5d0a80118209aba135744a004464c641360266ae7011010c264044d55cf280089baa00135742a0046464646666ae68cdc39aab9d5002480008cc8848cc00400c008cd40a1d69aba150023041357426ae8940088c98c826c04cd5ce02202184c8089aab9e5001137540026ae84d5d1280111931904b8099ab9c04003f09501135573ca00226ea8004d5d0a80299a8153ae35742a008666aa03603840026ae85400cccd5406dd710009aba15002301e357426ae8940088c98c824c04cd5ce01e01d8488089aba25001135744a00226ae8940044d5d1280089aba25001135744a00226ae8940044d5d1280089aba25001135744a00226aae7940044dd50009aba15002300e357426ae8940088c98c821404cd5ce0170168418088160993190420099ab9c491035054350002c135573ca00226ea8004d40548c8c8c8cccd5cd19b875001480088cc88488cc00401000cc088d5d0a8019bae357426ae89400c8cccd5cd19b875002480008c8488c00800cc08cd5d09aab9e50052326320840133573805a058104021020226aae7540084d55cf280089baa0011123500122001232323333573466e1cd55cea8012400046644246600200600460126ae854008c014d5d09aba2500223263207f33573805004e0fa26aae7940044dd50009191919191999ab9a3370e6aae7540112000233332222123333001005004003002302235742a008666aa010eb9401cd5d0a8019919191999ab9a3370ea0029002119091118010021aba135573ca00646666ae68cdc3a80124004464244460020086eb8d5d09aab9e500423333573466e1d400d2000212220032326320860133573805e05c10802106021040226aae7540044dd50009aba1500233502375c6ae84d5d128011193190400099ab9c02902807e135744a00226ae8940044d55cf280089baa0011335500175ceb44488c88c008dd5800990009aa83d11191999aab9f0022507c233507b3355061300635573aa004600a6aae794008c010d5d100181289aba1001232323333573466e1d400520062321222230040053007357426aae79400c8cccd5cd19b875002480108c848888c008014c080d5d09aab9e500423333573466e1d400d20022321222230010053007357426aae7940148cccd5cd19b875004480008c848888c00c014dd71aba135573ca00c464c640fc66ae7009c0981f01ec1e81e44d55cea80089baa001232323333573466e1cd55cea80124000466442466002006004600a6ae854008dd69aba135744a004464c640f466ae7008c0881e04d55cf280089baa0012323333573466e1cd55cea800a400046eb8d5d09aab9e50022326320783357380420400ec26ea80048c8c8c8c8c8cccd5cd19b8750014803084888888800c8cccd5cd19b875002480288488888880108cccd5cd19b875003480208cc8848888888cc004024020dd71aba15005375a6ae84d5d1280291999ab9a3370ea00890031199109111111198010048041bae35742a00e6eb8d5d09aba2500723333573466e1d40152004233221222222233006009008302335742a0126eb8d5d09aba2500923333573466e1d401920022321222222230070083024357426aae79402c8cccd5cd19b875007480008c848888888c014020c094d5d09aab9e500c232632081013357380540520fe0fc0fa0f80f60f40f226aae7540104d55cf280189aab9e5002135573ca00226ea8004488c8c8cccd5cd19b87500148010848880048cccd5cd19b875002480088c84888c00c010c018d5d09aab9e500423333573466e1d400d20002122200223263207a3357380460440f00ee0ec26aae7540044dd5000911a800911111111111299a999aa982989000a80791a80091299a999ab9a3375e0020220f20f026a0f80062a0f6004426a0f46a002440042a0f0266a08a44a66a004420062002a0d2424460040064444244666600200c00a00800624444400242446004006466a002900124000640026aa0d644646464646464646464646464646666ae68cdc3a800a40144664424444446600c01000e60266ae85400cc040d5d09aba2500323333573466e1d4009200823332221222222333003009008007301635742a00c66a602a240020286ae854014c044d5d09aba2500523333573466e1d400d2006233322212222223330010090080073350142323232323333573466e1d400520022332212233001004003301935742a0066eb8d5d09aba2500323333573466e1d400920002332212233002004003301a35742a00a60326ae84d5d128029193190420099ab9c02d02c0820108101135573aa00626aae7940084d55cf280089baa00135742a0126eb4d5d0a80418091aba135744a01046666ae68cdc3a802240084666444244444466600801201000e602c6ae854030c04cd5d0a80598099aba135744a01646666ae68cdc3a802a40044666664444424444446666600401601401201000e60406ae854044c8c8c8cccd5cd19b875001480088c1c0c090d5d09aab9e500323333573466e1d4009200023212230020033025357426aae7940108c98c821004cd5ce016816041008408089aab9d5001137540026ae854040c098d5d0a80799a980c0900080b9aba1500e3014357426ae8940388cccd5cd19b8750064800081b08c98c820004cd5ce01481403f03e83e03d83d03c89aab9d500c135573ca01626ae8940044d55cf280489aba25001135573ca00e26ae8940044d55cf280289aba25001135744a00226ae8940044d55cf280089baa00123232323232323333573466e1d4005200423212223001004300a357426aae79401c8cccd5cd19b875002480088cc884888cc00c014010c04cd5d0a80219a805119191999ab9a3370e6aae7540092000233221233001003002375a6ae854008dd69aba135744a004464c640ee66ae7008007c1d44d55cf280089baa001357426ae8940108cccd5cd19b875003480008cccc88884888cccc00801c018014010c054d5d0a804180a9aba15007301b35742a00c66a601a240020186ae84d5d1280311931903a19ab9c01d01c072071070135573aa00a26aae7940104d5d1280089aba25001135573ca00226ea800448c88c008dd6000990009aa835111999aab9f0012506b233506a30043574200460066ae88008050c8004d541a088c8c8c8c8c8c8c8c8c8cccd5cd19b8750014805084888888888880248cccd5cd19b8750024804884888888888880188cccd5cd19b875003480408cc88488888888888cc014034030cd4c03c48004038d5d0a80299a9807890008071aba135744a00a46666ae68cdc3a8022401c466442444444444446600401a01866a60202400201e6ae85401ccd4c0404800403cd5d09aba2500723333573466e1d4015200c233221222222222223300100d00c33530111200101035742a01266a6022240020206ae84d5d1280491999ab9a3370ea00c9005119910911111111111980180680619a9809090008089aba1500b335301212001011357426ae89402c8cccd5cd19b875007480208cc88488888888888cc010034030cd4c04c48004048d5d0a80699a9809890008091aba135744a01a46666ae68cdc3a8042400c464244444444444601401860366ae84d55cf280891999ab9a3370ea01290021190911111111111804006180a1aba135573ca02446666ae68cdc3a80524004466442444444444446600e01a018602a6ae854044c054d5d09aba2501123333573466e1d402d2000233221222222222223300b00d00c301635742a026602c6ae84d5d1280991931903f19ab9c02702607c07b07a079078077076075074073072135573aa01026aae79401c4d55cf280309aab9e5005135573ca00826aae79400c4d55cf280109aab9e500113754002640026aa0ce442446464646464646464646666ae68cdc3a800a402c4666444244444444444466601201e01c01a60186ae854010cd4c03848004030d5d0a80199a9807090008061aba135744a00646666ae68cdc3a801240284642444444444444600201a60206ae84d55cf280591999ab9a3370ea00690091091111111111100191999ab9a3370ea00890081091111111111100111999ab9a3370ea00a900711909111111111111805006980c9aba135573ca01c46666ae68cdc3a803240184664424444444444446600e01c01a66a6026240020226ae854028cd4c04c48004044d5d09aba2500a23333573466e1d401d200a2332212222222222223300600e00d33530141200101235742a01866a6028240020246ae84d5d1280611999ab9a3370ea01090041199109111111111111980200700699a980a890008099aba1500e335301512001013357426ae8940388cccd5cd19b875009480188cc884888888888888cc030038034cd4c05848004050d5d0a80819a980b0900080a1aba135744a02046666ae68cdc3a805240084642444444444444600a01a66a602e2400202a6ae84d55cf280991999ab9a3370ea0169001119091111111111118040069bad357426aae7940508cccd5cd19b87500c480008cc884888888888888cc02c038034c084d5d0a80a18139aba135744a028464c641000266ae700a40a01f81f41f01ec1e81e41e01dc1d81d41d01cc4d55cea80409aba25001135573ca00c26aae7940144d55cf280209aab9e5003135573ca00426aae7940044dd50009191999ab9a3370e6aae75400520002375c6ae84d55cf280111931903499ab9c0120110671375400246a00244466e95200033574066e9520003357406ea400cdd883419aba03500222223374a900019aba0374c602e00866ae80dd3180c00199aba0374c603200466ae80dd40009bb106c33574060a60026ec41a088848ccc00401000c00888cd54c0dc480048d400488cd5412c008cd54c0e8480048d400488cd54138008cdc1004000800800a400246464646464646666ae68cdc3a800a40084244400246666ae68cdc3a801240044664424446600600a00860146ae854010dd69aba135744a00846666ae68cdc3a801a40004666644442444666600400e00c00a00860186ae854020c030d5d0a80398091aba15006375a6ae84d5d1280311931903599ab9c014013069068067135573aa00a26aae7940104d5d1280089aba25001135573ca00226ea80048c8c8cccd5cd19b8735573aa00490001199109198008018011bae35742a004600a6ae84d5d1280111931903219ab9c00d00c062135573ca00226ea80048c8c8c8cccd5cd19b875001480088c8488c00400cdd71aba135573ca00846666ae68cdc3a80124000466442446600400800660166ae854010c01cd5d09aba2500423263206533573801c01a0c60c426aae7540084d55cf280089baa001232323333573466e1cd55cea801240004660b2600e6ae854008cd4014018d5d09aba250022326320623357380160140c026aae7940044dd500089119191999ab9a3370ea002900011a82d98029aba135573ca00646666ae68cdc3a801240044a0b6464c640c666ae7003002c1841804d55cea80089baa0012323232323333573466e1d400520022333222122333001005004003375a6ae854010dd69aba15003375a6ae84d5d1280191999ab9a3370ea0049000119091180100198041aba135573ca00c464c640c666ae7003002c1841804d55cea80189aba25001135573ca00226ea80048c8c8cccd5cd19b875001480088c168dd71aba135573ca00646666ae68cdc3a8012400046424460040066eb8d5d09aab9e50042326320603357380120100bc0ba26aae7540044dd50009191999ab9a3370ea0029001102991999ab9a3370ea0049000102991931902f19ab9c00700605c05b135573a6ea80048c8c8cccd5cd19b8735573aa00490001199109198008018011bae35742a0046eb8d5d09aba2500223263205d33573800c00a0b626aae7940044dd500089000a48103505431003200135505622533500115005221350022233574066ec0d400888cdd2a400066ae80c148008cd5d018278009bb105d3750002600c006640026aa0aa44a66a0022a0084426a0044466ae80cdd818270011ba800130060033200135505422533500115003221350022233574066ec0c130008dd4000980300189bb2052222350012222533533300c04133355302c120015008235001223500222350012233505d335504300233505d3355043001005505e505e0040061533533355302c120013500f500e23500122333573466e2400520000510520041533533550102235002223500322533533044004002133040003001105400415335335501003d00313355010040002104e104e104e104e13350255001504f130010022223355302412001235001223355038002335530271200123500122335503b002333500123300a4800000488cc02c0080048cc0280052000001330060020012233700004002444666aa6046240026a00ca00a46a00244666aa604c240026a012a01046a00244666a00246601490000009119805801000919805000a4000002660080040024466aa60402400246a0024466aa068004666a002466aa60482400246a0024466aa0700046aa04a00200244666aaa040074004002466aa60482400246a0024466aa0700046aa048002002666aaa03606a0040022246600244a66a004200220860842466a03e44666a006440040040026a00244002224644600466aa603c2400246a00244004002640026aa09444a66a0022084442a66a666aa6042240026a03ea046600a004002208626008002640026aa0904444464a66a00842a66a006266aa064002008442a66a00c2600893099aa81a0018230a99a8010b1109801a4c4a66a0042c4426a004446a00244446a0084466a0044666602202001e01c0144a66a60200022a66a01e42c266660220206a0a401601c0142666602202001e09c014640026aa08e44444444a66a66666602808800c00a008a09aa09a444442a66a0102666444244446666600200e00c00a012010a66a0182094200a666aa604424002a0a26a01c00800e666aa604424002a0a200600c442a666666a0064420382034444203a444203a44444203e4442a666a666602a02000e00a0064442666666602a0a402600400200e666aa605424002a0b2a66a0062a0b4444426a06c244660042444446666008016014012010002666aa605424002a0b26a02c01801e666aa605424002a0b201601c224444006203a224444008246666aa603424002a00444a66666a004266a08c24444400a00220024444266a094244444666600601201000e00c00a44444266a0962444446666600401401201000e00c00c444266a09224444466600201000e00c008002a08a266a032444600660040024002640026aa08844444a66a00222444002464464266a008446006004446006004466a00c444a66a666601a016014006008442660100040022666601801601401200a4a66a66660160120100020044426600c0040022666601401201000e0064466a00a44466a00c4402444a66a666ae68cdc780200082382309998098038030018809119a802111998088028020009100811112999a801110999a80191299a998178020010a99a999aa980f090009a80e281011a80091299a999ab9a3371000c00408608826601800c002208600226601601c6a00e444466660620086666aa03406601000e006004002201420144444018401244442666a00a440184444a66a660680100082a66a6606800e0062a66a6606000c0042a66a666ae68cdc3802999816006005800822822099807a99a999ab9a3371200a90000220228809089119998008028030020039a8059111199981a999980e006005004802001801000880708070807080710058999a8009100411110051299a999813002802000899804005802080391199ab9a337120040020740724424466004008006244002444244466600600c00a008244400424400424444004640026aa076444464444a666aa666666a0064426666038a66a66604601000e0042040224444400a03e00e00226a00a4444a66a601c008426a002446a0044446666048050604c66660520066074006004002666605e00801201000e072203e4442666603a042040010a66a6660480120100062004200244646442666603e6004a0120446a0144444666605c0080066666aa02e066012a00ea01a002002640026aa08c44a66a00220464426a00444a66a666ae68cdc7801004821020899091111199800807803803280389803001899981100400380091119119191910a99a999ab9a33712a008900002102089999811990911111999801807807006803280201300700089999811a99a999ab9a33710a006a008084082266442444446666600402001e01c00e00ca006a008204e604a666605001201000ea0066a01c4444666606466a01846666034002018a010a00e4a00e0060040020022666602800e00a66e0540114004d4030888801054cd4ccd5cd19b895003500103f03e1500315001133302500b00a001135008222233302a00700500422215335333573466e20d4024880040080f00ec407854cd4ccd5cd19b89002350092200203c03b1333301d021020008001112220031122001133221223333300200b00400300900735009002350090012222133333300c03d00a0020015333335004133504400400610062222133504800800a22222133504900900b222133504700700953350031005213350450010061350012222002132233002001503a3200135503a222533500210012213300500133503c0020033200135503922533500115033221350022235002225335333573466e2400d200003603713503a3355024333555009002001003005130080051112221233300100400300222225335333573466e2400920000310301001133330050040033370066603600800600200400244644a66a666ae68cdc4800a400006005e2460060022666aa00a446a004446a00644a66a6604a008004266042006002206a66aa03a008006002640026aa07044a66a0022a0704426a004446a00444a66a6604a0040142a66a66042002012200a266a07a66aa046008006601000a266a07a66aa046008006601000a2244446666aa00a008440020026a01e2446600466aa03c00a00800222444466aa60142400246a0024466aa03c004666a002400244660100040024002666aaa00a008004002222444666aa600824002a06666aa60102400246a0024466aa0380046aa012002666aa600824002446a00444a66a666aa601a240026a016a01e46a002446601400400a00c2006266a06e008006a06800266aa60102400246a002446466aa03a006600200a640026aa07244a66a00226aa0140064426a00444a66a6601800401022444660040140082600c006004640026aa0644422444a66a00220044426600a004666aa600e2400200a00800222424446006008224244460020082466a00844666a006440040040026a00244002640026aa05c442244a66a0022a06044266a062600800466aa600c24002008002640026aa05a4422444a66a00226a00644002442666a00a440046008004666aa600e2400200a00800224424660020060042246600244a66a004204820020422466a002a050a052244400444442444666600200e00c00a00824400442446002006244444008444424666600200a0080060046a004440026a002440046aaaa044244466006444a66666666666a002442a66a66600e00a008004266600e00a008002203c464260026a0084444006640026aa05044a66a002203e4426a00444a66a6602400400e20482600c006203842a66a66600c008006002203a203c442a66a66600e00a008004203e266600e00a008002203a442666ae68cdc399980300280200119980300280200080f80f110999ab9a3371066600c00a00800466600c00a00800203c03e442666ae68cdc499980300280200119980300280200080f00f910999ab9a3371266600c00a00800466600c00a00800203e03c442666ae68cdc419980300280200119980300280200080f80f1112999999999999a80091099b8033300600500400233300600500400122135004222233300d0060050042321300135004222200332001355028223350014800088d4008894cd4cc04800801c40044c01800c88854cd4ccc02001801400c4ccc01c0180140084ccc01c0180140048400488c854cd4ccd5cd19b8750014800008007c5200013370866600e00c00a006a002266600c00a00800244266e08ccc018014010008ccc01801401000484cdc0a400066600a00800600244266e04ccc018014010008ccc0180140100044d400c880044d400c880088c84c004d40108888008c8004d540a088cd400520002235002225335333573466e3c00801c09008c40044c01800c88c88c008004c8004d5408888cd40052000223500222350022253353300f00200a153353300b0010091003130080051300800522350022235003225335333573466e3c01000806c0684cc03000c0044068888848cccc00401401000c008448848cc00400c00888d400888d400c894cd4ccd5cd19b8f004002018017133007003001101722335002223350032253350041533500213300700300110161533500210161330070030012015233500222015233006002001223500222350032232335005233500425335333573466e3c0080040640605400c406080608cd4010806094cd4ccd5cd19b8f002001019018150031018153350032153350022133500223350022335002233500223300d002001201b2335002201b23300d00200122201b222335004201b2225335333573466e1c01800c07807454cd4ccd5cd19b8700500201e01d133010004001101d101d10161533500121016101622333573466e3c00800404404088ccd5cd19b8700200101000f35002220013500122002355550161222330032533333350012213374a900519aba0300a002335740600a0026ec40684cdd2a40006ec40608884cdd2a400866ae80c02c00ccd5d0180300119aba030060013762036444266e952008335740601c00666ae80cd4c0304800402c008cd5d018030009bb101b2222213374a900119aba0301200533574066a008466e95200033574060260026ec40788cdd2a400466ae80c04c004dd880f19aba0300f00333574066a601c2400201a00466ae80c020004dd880e911099ba548018cd5d01ba730050033357406ea0008cd5d018030009bb101b253350011376203044266ae80cd400888cdd2a400066ae80c02c008cd5d018038009bb101c223374a900119aba0300b0023357406ea4004dd880e18020008911111002909118008019199a8009119ba548008cd5d0180400119aba0374e60220026ec40508888cdd2a400066ae80c02c010cd5d0180580199aba0300800233574066a600e2400200c0026ec40588cdd2a400866ae80c00c004dd8809990009aa80891299999999999a80091099ba548000cd5d0180200119aba0300400137620284266e952006335740600e0026ec404c4cdd2a40286ec404884cdd2a400866ae80c00c004dd880991099ba548008cd5d0180200119aba030040013762028266e952012376202444266e95201033574066a600a2400200800466ae80cd4c01448004010004dd880a11099ba548020cd5d019a98028900080200119aba0335300512001004001376202844266e95200a33574066a600a2400200800466ae80cd4c01448004010004dd880a11099ba548038cd5d019a98028900080200119aba0335300512001004001376202844266e95200c33574066a600a2400200800466ae80cd4c01448004010004dd880a190009aa808110912999999999999a80091099ba548018cd5d019a98030900080200119aba0335300612001004001376202a44266e952000335740601400466ae80c01c004dd880a9099ba548038cd5d018040009bb101422213374a900b19aba0300500333574066a600e2400200a00466ae80cd4c01c48004014004dd880b1099ba548008cd5d01ba8001376202844266e95200c33574066a600c2400200800466ae80cd4c01848004010004dd880a91099ba548028cd5d019a98030900080200119aba0335300612001004001376202a4266e95200433574066a600a240020060026ec4050884cdd2a401066ae80cd4c01848004010008cd5d019a9803090008020009bb101513374a90091bb101313374a90081bb1013213374a900a19aba03007001376202846a0024466e9520003357406ea4008cd5d01ba90013762022466e9520003357406ea4004dd880711a8009119ba548000cd5d01ba900233574060080026ec403c8cd400488cdd2a400066ae814cd40084cdd2a40046ec40384cdd2a40006ec4038cd5d01a8009119ba548000cd5d0180580119aba05335001213374a900019aba033500123374a900019aba0300d001376202444466e9520023357406ea000ccd5d01ba80023357406ea0004dd880a1bb101113374a90011bb101037620206ec40388cdd2a400466ae80dd48009bb100d1220021220012212330010030021212230020031122001233500123374a900019aba037520026ec401c8cdd2a400466ae80dd48009bb100721223001003320013550042253350011376200a44266ae80d400888cdd2a400066ae80dd400119aba037500026ec4024c0100044488008488488cc00401000d2611232300100122330033002002001111123323001001223212353212330012350032230020032350032230010031235300300435004001001300200200148811c49076eab20243dc9462511fb98a9cfb719f86e9692288139b7c91df30001"

currentV1PayoutScriptCBOR :: ByteString
currentV1PayoutScriptCBOR = auditV1PayoutScriptCBOR

auditV1Scripts :: MarloweScripts
auditV1Scripts = MarloweScripts
  { marloweScript = "6a9391d6aa51af28dd876ebb5565b69d1e83e5ac7861506bd29b56b0"
  , payoutScript = "49076eab20243dc9462511fb98a9cfb719f86e9692288139b7c91df3"
  , marloweScriptUTxOs = Map.fromList
      [ ( mainnetNetworkId
        , ReferenceScriptUtxo
            { txOutRef = "c4aff1631174a4463981fad948f17edf8550bf6a9347822abed74917e074271a#1"
            , txOut = Chain.TransactionOutput
                { address = fromJust $ fromBech32 "addr1z9l4w7djneh0kss4drg2php6ynflsvmal7x3w5nrc95uvhz7e4q926apsvcd6kn33cpx95k8jsmrj7v0k62rczvz8urqrl2z0l"
                , assets = Assets 54922330 mempty
                , datum = Just $ Constr 0 []
                , datumHash = Nothing
                }
            , script = either (error . show) id $ deserialiseFromCBOR (AsPlutusScript AsPlutusScriptV2) auditV1MarloweScriptCBOR
            }
        )
      , ( preprodNetworkId
        , ReferenceScriptUtxo
            { txOutRef = "d1e488d70850fc36ef6971a65d1f45e2a7a433e4080e4c5c580d0b23094a955e#1"
            , txOut = Chain.TransactionOutput
                { address = fromJust $ fromBech32 "addr_test1vrw0tuh8l95thdqr65dmpcfqnmcw0en7v7vhgegck7gzqgswa07sw"
                , assets = Assets 54801650 mempty
                , datum = Just $ Constr 0 []
                , datumHash = Nothing
                }
            , script = either (error . show) id $ deserialiseFromCBOR (AsPlutusScript AsPlutusScriptV2) auditV1MarloweScriptCBOR
            }
        )
      , ( previewNetworkId
        , ReferenceScriptUtxo
            { txOutRef = "929b418dd69c1b9531fdd55039e8f12aa9d6f11a27b600a8e0d56c7e9f2851a0#1"
            , txOut = Chain.TransactionOutput
                { address = fromJust $ fromBech32 "addr_test1vrw0tuh8l95thdqr65dmpcfqnmcw0en7v7vhgegck7gzqgswa07sw"
                , assets = Assets 54801650 mempty
                , datum = Just $ Constr 0 []
                , datumHash = Nothing
                }
            , script = either (error . show) id $ deserialiseFromCBOR (AsPlutusScript AsPlutusScriptV2) auditV1MarloweScriptCBOR
            }
        )
      ]
  , payoutScriptUTxOs = Map.fromList
      [ ( mainnetNetworkId
        , ReferenceScriptUtxo
            { txOutRef = "c4aff1631174a4463981fad948f17edf8550bf6a9347822abed74917e074271a#2"
            , txOut = Chain.TransactionOutput
                { address = fromJust $ fromBech32 "addr1z9l4w7djneh0kss4drg2php6ynflsvmal7x3w5nrc95uvhz7e4q926apsvcd6kn33cpx95k8jsmrj7v0k62rczvz8urqrl2z0l"
                , assets = Assets 12555030 mempty
                , datum = Just $ Constr 0 []
                , datumHash = Nothing
                }
            , script = either (error . show) id $ deserialiseFromCBOR (AsPlutusScript AsPlutusScriptV2) auditV1PayoutScriptCBOR
            }
        )
      , ( preprodNetworkId
        , ReferenceScriptUtxo
            { txOutRef = "d1e488d70850fc36ef6971a65d1f45e2a7a433e4080e4c5c580d0b23094a955e#2"
            , txOut = Chain.TransactionOutput
                { address = fromJust $ fromBech32 "addr_test1vpa36uuyf95kxpcleldsncedlhjru6vdmh2vnpkdrsz4u6cll9zas"
                , assets = Assets 12434350 mempty
                , datum = Just $ Constr 0 []
                , datumHash = Nothing
                }
            , script = either (error . show) id $ deserialiseFromCBOR (AsPlutusScript AsPlutusScriptV2) auditV1PayoutScriptCBOR
            }
        )
      , ( previewNetworkId
        , ReferenceScriptUtxo
            { txOutRef = "929b418dd69c1b9531fdd55039e8f12aa9d6f11a27b600a8e0d56c7e9f2851a0#2"
            , txOut = Chain.TransactionOutput
                { address = fromJust $ fromBech32 "addr_test1vpa36uuyf95kxpcleldsncedlhjru6vdmh2vnpkdrsz4u6cll9zas"
                , assets = Assets 12434350 mempty
                , datum = Just $ Constr 0 []
                , datumHash = Nothing
                }
            , script = either (error . show) id $ deserialiseFromCBOR (AsPlutusScript AsPlutusScriptV2) auditV1PayoutScriptCBOR
            }
        )
      ]
  }

auditV1MarloweScriptCBOR :: ByteString
auditV1MarloweScriptCBOR = either (error . T.unpack) id $ decodeBase16 "5930d95930d60100003323232332232323233223233223232323232323232323232323232323232323232323232323232323232323232332233223232323232332232323232323232323232323233223322323232323232323232323232323232323232323232323232323232323232323232323232323232323322323232323232323232323232323232322322223232533533322235003223232235006232323232323223353235001223500223223355335333573466e2000400c2500424c044c0c4c8488c00400ccd542040400c00454cd4ccd5cd19b880015011094010930113031332212233002004003501133550810100300113322122330010040033355081015002001350122222333308401004003002500623030122222300200622533335333333305409501002001011006509e01509e01130311222220051303112222200313031122222004222221533500513333035004003002001153333335016221303803913501922225335333355307112001505f220a00100409f011303a03b133330390080070060052221303903a2221303903a222221303b03c2221303903a15335333573466e24005403c24804244045403c4004cc8848cc00400c0094cd4c8d400488d4008894ccd400884d4010894ccd400884d426804cd5421004cdc099b8000448008c0d4014cdc019b8100148008c0d40085426004542600454254045425404d4020888888888888014840044c98c826004cd5ce24901610007450062533333500113263209901335738921016900075132632099013357389201016e00075132632099013357389201016d0007521335001223263209c01335738921016b0007823263209b013357389201016a000771326320990133573892010175000752232225335533553353501122223335530691200135038503723500122333573466e2400520000990109a0100410930113357389201016200092011533533303208501500f353535500922002220012222003109301133573892101760009201109201153353335530651200135034503325333500122135002223011001222213011003109401500a15335333553065120013503450332350012233500222533533303705b00333355306a120015022235001222200333355306b120012253353308a0135002222200400313350a101002001100150a001500c109801133573892010170000970125335333553069120013506d5070235001222253335002109b012109c0121533533303c22333573466e200080042780427c0401002054cd54cd4cc0d4c8d400488cdd2a400066ae80dd480119aba037520026ec42a404cd542280407001c05c84cc23c040040084270044cc23404014cc27804c28804099427c04427004427005402c425c044cd5ce24810172000960150031533333350012215335355335333553068120012253353500222223308b015010004133509e010020011001509d015009130764988854cd40044008884c1e926222253335002109801210990121533533303908c01004333026027333026027501633355306c12001502425333500122150a5012222135002223350a801335508e010023350a801335508e0100100350a90150a901150a30150113304604733355306c12001502455028500a153355335330323043333044019009008014213308c0100100210990113308a01005500f1099011099011095011335738920101640009401153353335530651200135034503325335330840135001222200450091093011094015007109301133573892010163000920122215335355335333553069120012253353500222223308c015011004133509f010020011001509e01500a130784988854cd40044008884c1f1262222533350021099012109a0121533533303a08d01004333027028333027028501733355306d12001502525333500122150a6012222135002223350a901335508f010023350a901335508f0100100350aa0150aa01150a40150123304704833355306d12001502555029500b15335533533033304433304501a00a009015213308d01001002109a0113308b010055010109a01109a0110960113357389210164000950122215335355335333553069120012253353500222223308c015011004133509f010020011001509e01500a130794988854cd40044008884c1f5262222533350021099012109a0121533533303a08d01004333027028333027028501733355306d12001502525333500122150a6012222135002223350a901335508f010023350a901335508f0100100350aa0150aa01150a40150123304704833355306d12001502555029500b15335533533033304433304501a00a009015213308d01001002109a0113308b010055010109a01109a01109601133573892101640009501222221533535533533355306b120012253353500222223308e01501300413350a101002001100150a001500c1307c4988854cd40044008884c2000526222253335002109b012109c0121533533303c08f0100433302902a33302902a501933355306f12001502725333500122150a8012222135002223350ab013355091010023350ab0133550910100100350ac0150ac01150a60150143304904a33355306f1200150275502b500d15335533533035304633304701c00c00b017213308f01001002109c0113308d010055012109c01109c0110980113357389210164000970122215335355335333553069120012253353500222223308c015011004133509f010020011001509e01500a1307b4988854cd40044008884c1fd262222533350021099012109a0121533533303a08d01004333027028333027028501733355306d12001502525333500122150a6012222135002223350a901335508f010023350a901335508f0100100350aa0150aa01150a40150123304704833355306d12001502555029500b15335533533033304433304501a00a009015213308d01001002109a0113308b010055010109a01109a0110960113357389210164000950110920110920110920113335530621200132335068335506108001001509901501b23500122223350032509e01235003225335333573466e2401120000970109801133509f0133550850100333509f0133550850100233509f0133550850100100450a00150a00150a001150a00100113500622222222222200a13550012200113553353500a22350022222222222223333500d2509b012509b012509b01233355306b1200150322533535001223304700200413509d010011509c0100d21533533355305e120012253353500322350012222350042233500220950123500b223500122223500422335002209e012330900100a00113350940100200110015093013500522222222222200c130474988854cd40044008884c12d261326320940133573892101780007022350012222335507d53353501022350022222222222223333500d250a101250a101250a10123335530711200150382533535001223304d0020041350a301001150a20100d2153353335530641200122533535003223500122223500422335002209b0123500b22350012222350042233500220a4012330960100a001133509a0100200110015099013500b22222222222200c1304e4988854cd40044008884c1492613263209a0133573892101780007600413355306112001233500122200320015001133553060120012335001212230010032232533535006222222222222300d002213212233300200700600330300011326320960133573892101680007232001355095012253350011508f0122135002225335333573466e3c00801c24404240044d4250040044c01800c0248cd4004894cd4d400488cd40088d401c8888888888894cd4ccd54c1ac4800540c894cd4ccd5cd19b8f00e00109a010990113509d010011509c010042109a01109801208c01108a011335738921017300089012533533302804c33509001335507600833509001335507600148009424405424404d400c888888888888ccd54c19c48005407c8d400488d4004888800c0304224044cd5ce24810174000880113233355305712001500f235001223500222350012233509301335507900233509301335507900100550940150940100135002222200413500122220013232323333573466e1cd55cea801a4000466605864646666ae68cdc39aab9d5001480008dd71aba135573ca004464c6411e0266ae700f01ac234044dd50009aba1500332323232323333573466e1cd55cea80224000466660e8666aa034464646666ae68cdc39aab9d5002480008cd541e4c0f0d5d0a80118211aba135744a004464c6412c0266ae7010c1c8250044d55cf280089baa00175a6ae854010ccd540680ddd69aba150033335501a03075a6ae854008dd69aba135744a004464c641240266ae700fc1b8240044d5d1280089aba25001135573ca00226ea8004d5d0a80118129aba135744a004464c641180266ae700e41a0228044d5d1280089aab9e50011375400a600c0086666ae68cdc39aab9d5002480008cc8848cc00400c008c8c8c8c8c8c8c8c8c8c8c8c8c8cccd5cd19b8735573aa018900011999999999999111111111110919999999999980080680600580500480400380300280200180119a81900e1aba1500c33503201c35742a01666a06403a6ae854028ccd5407dd7280f1aba150093335501f75ca03c6ae854020cd40c808cd5d0a803999aa80f8203ad35742a00c6464646666ae68cdc39aab9d5002480008cc8848cc00400c008c8c8c8cccd5cd19b8735573aa004900011991091980080180119a8163ad35742a00460946ae84d5d1280111931904f8099ab9c04c07b09d01135573ca00226ea8004d5d0a8011919191999ab9a3370e6aae754009200023322123300100300233502c75a6ae854008c128d5d09aba2500223263209f013357380980f613a0226aae7940044dd50009aba135744a004464c641360266ae701201dc264044d55cf280089baa00135742a00a66a064eb8d5d0a802199aa80f81010009aba150033335501f75c40026ae854008c088d5d09aba25002232632097013357380880e612a0226ae8940044d5d1280089aba25001135744a00226ae8940044d5d1280089aba25001135744a00226ae8940044d5d1280089aab9e5001137540026ae854008c048d5d09aba250022326320890133573806c0ca10e0220c8264c641100266ae7124010350543500064135573ca00226ea8004d40748c8c8c8cccd5cd19b875001480088cc88488cc00401000cc0acd5d0a8019bae357426ae89400c8cccd5cd19b875002480008c8488c00800cc0b0d5d09aab9e50052326320880133573806a0c810c0210a0226aae7540084d55cf280089baa001133504d5001507e130010022223355304f12001235001223355067002335530521200123500122335506a002333500123300a4800000488cc02c0080048cc02800520000013301900200122337000040022246a00244002464646666ae68cdc39aab9d5002480008cc8848cc00400c008c024d5d0a80118029aba135744a004464c640fe66ae700b016c1f44d55cf280089baa0012323232323333573466e1cd55cea8022400046666444424666600200a008006004604e6ae854010ccd54021d728039aba150033232323333573466e1d4005200423212223002004357426aae79400c8cccd5cd19b875002480088c84888c004010dd71aba135573ca00846666ae68cdc3a801a400042444006464c6410c0266ae700cc1882100420c04208044d55cea80089baa00135742a00466a050eb8d5d09aba250022326320800133573805a0b80fc26ae8940044d5d1280089aab9e500113754002266aa002eb9d6889119118011bab0013200135507a223233335573e0044a0f8466a0f666aa0c2600c6aae754008c014d55cf280118021aba2003059135742002464646666ae68cdc3a800a400c46424444600800a600e6ae84d55cf280191999ab9a3370ea004900211909111180100298129aba135573ca00846666ae68cdc3a801a400446424444600200a600e6ae84d55cf280291999ab9a3370ea00890001190911118018029bae357426aae7940188c98c81f8cd5ce01582d03e03d83d03c89aab9d500113754002464646666ae68cdc39aab9d5002480008cc8848cc00400c008c014d5d0a8011bad357426ae8940088c98c81e8cd5ce01382b03c09aab9e5001137540024646666ae68cdc39aab9d5001480008dd71aba135573ca004464c640f066ae700941501d84dd5000919191919191999ab9a3370ea002900610911111100191999ab9a3370ea004900510911111100211999ab9a3370ea00690041199109111111198008048041bae35742a00a6eb4d5d09aba2500523333573466e1d40112006233221222222233002009008375c6ae85401cdd71aba135744a00e46666ae68cdc3a802a400846644244444446600c01201060506ae854024dd71aba135744a01246666ae68cdc3a8032400446424444444600e01060526ae84d55cf280591999ab9a3370ea00e900011909111111180280418151aba135573ca018464c641020266ae700b81741fc1f81f41f01ec1e81e44d55cea80209aab9e5003135573ca00426aae7940044dd500089119191999ab9a3370ea00290021091100091999ab9a3370ea00490011190911180180218031aba135573ca00846666ae68cdc3a801a400042444004464c640f466ae7009c1581e01dc1d84d55cea80089baa0012235001222222222222533533355304812001500f235001225335333573466ebc0040441e41e04d41f000c541ec00884d41e8d400488008541e04cd40f8894cd40088400c400541a48488c00800c8888488cccc00401801401000c4888880048488c00800c8cd4005200248000888ccd54c0d848004d401540108d400488ccd54c0e448004d4021401c8d400488ccd40048cc0292000001223300b00200123300a00148000004cc018008004448cc004894cd40084004418818448cd40dc88ccd400c88008008004d40048800488cd54c0e0480048d400488cd54140008ccd40048cd54c0f0480048d400488cd54150008d540f000400488ccd5540d81580080048cd54c0f0480048d400488cd54150008d540ec004004ccd5540c4144008004c8004d5419c88c8c8c8c8c8c8c8c8c8c8c8c8c8cccd5cd19b875001480288cc884888888cc01802001cc04cd5d0a80198081aba135744a00646666ae68cdc3a801240104666444244444466600601201000e602c6ae854018cd4c05448004050d5d0a80298089aba135744a00a46666ae68cdc3a801a400c4666444244444466600201201000e66a0284646464646666ae68cdc3a800a4004466442446600200800660326ae85400cdd71aba135744a00646666ae68cdc3a80124000466442446600400800660346ae854014c064d5d09aba250052326320800133573805a0b80fc0fa26aae75400c4d55cf280109aab9e5001137540026ae854024dd69aba150083012357426ae8940208cccd5cd19b875004480108ccc8884888888ccc01002402001cc058d5d0a80618099aba1500b3013357426ae89402c8cccd5cd19b875005480088ccccc888884888888ccccc00802c02802402001cc084d5d0a8089919191999ab9a3370ea00290011183618129aba135573ca00646666ae68cdc3a801240004642446004006604c6ae84d55cf28021193190400099ab9c02d05c07e07d135573aa00226ea8004d5d0a80818139aba1500f33530181200101735742a01c60286ae84d5d1280711999ab9a3370ea00c9000103411931903e19ab9c02905807a079078077076075135573aa01826aae79402c4d5d1280089aab9e5009135744a00226aae79401c4d5d1280089aab9e5005135744a00226ae8940044d5d1280089aab9e50011375400246464646464646666ae68cdc3a800a40084642444600200860146ae84d55cf280391999ab9a3370ea004900111991091119801802802180a1aba1500433500a232323333573466e1cd55cea801240004664424660020060046eb4d5d0a8011bad357426ae8940088c98c81cccd5ce01002783889aab9e5001137540026ae84d5d1280211999ab9a3370ea006900011999911109111999801003803002802180b1aba15008301635742a00e60386ae854018cd4c03448004030d5d09aba2500623263207033573803a0980dc0da0d826aae7540144d55cf280209aba25001135744a00226aae7940044dd50008919118011bac001320013550662233335573e0024a0ce466a0cc60086ae84008c00cd5d1001022190009aa832111919191919191919191999ab9a3370ea002900a109111111111100491999ab9a3370ea0049009109111111111100311999ab9a3370ea0069008119910911111111111980280680619a9807890008071aba15005335300f1200100e357426ae8940148cccd5cd19b875004480388cc88488888888888cc008034030cd4c0404800403cd5d0a80399a9808090008079aba135744a00e46666ae68cdc3a802a4018466442444444444446600201a01866a6022240020206ae854024cd4c04448004040d5d09aba2500923333573466e1d4019200a233221222222222223300300d00c33530121200101135742a01666a6024240020226ae84d5d1280591999ab9a3370ea00e9004119910911111111111980200680619a9809890008091aba1500d335301312001012357426ae8940348cccd5cd19b875008480188c8488888888888c028030c070d5d09aab9e501123333573466e1d40252004232122222222222300800c3014357426aae7940488cccd5cd19b87500a480088cc88488888888888cc01c034030c054d5d0a808980a9aba135744a02246666ae68cdc3a805a4000466442444444444446601601a018602c6ae85404cc058d5d09aba2501323263207a33573804e0ac0f00ee0ec0ea0e80e60e40e20e00de0dc26aae7540204d55cf280389aab9e5006135573ca00a26aae7940104d55cf280189aab9e5002135573ca00226ea8004c8004d5418c88488c8c8c8c8c8c8c8c8c8cccd5cd19b875001480588ccc8884888888888888ccc02403c038034c030d5d0a80219a9807090008061aba15003335300e1200100c357426ae89400c8cccd5cd19b875002480508c84888888888888c004034c040d5d09aab9e500b23333573466e1d400d20122122222222222200323333573466e1d401120102122222222222200223333573466e1d4015200e2321222222222222300a00d301a357426aae7940388cccd5cd19b875006480308cc884888888888888cc01c038034cd4c04c48004044d5d0a80519a9809890008089aba135744a01446666ae68cdc3a803a40144664424444444444446600c01c01a66a6028240020246ae854030cd4c05048004048d5d09aba2500c23333573466e1d402120082332212222222222223300400e00d33530151200101335742a01c66a602a240020266ae84d5d1280711999ab9a3370ea01290031199109111111111111980600700699a980b0900080a1aba15010335301612001014357426ae8940408cccd5cd19b87500a480108c84888888888888c014034cd4c05c48004054d5d09aab9e501323333573466e1d402d20022321222222222222300800d375a6ae84d55cf280a11999ab9a3370ea01890001199109111111111111980580700698111aba150143028357426ae8940508c98c81f0cd5ce01482c03d03c83c03b83b03a83a03983903883803789aab9d5008135744a00226aae7940184d55cf280289aab9e5004135573ca00626aae7940084d55cf280089baa0012323333573466e1cd55cea800a400046eb8d5d09aab9e50022326320653357380240820c626ea80048d4004888cdd2a400066ae80cdd2a400066ae80dd48019bb10643357406a004444466e9520003357406e98c05c010cd5d01ba630180033357406e98c064008cd5d01ba800137620d066ae80c13c004dd88321110919980080200180111299a999ab9a3371e6a004440046a002440040ae0ac2666ae68cdc39a801110009a8009100082b82b082b1119aa98170900091a8009119aa82300119aa98188900091a8009119aa82480119b82008001001001480048c8c8c8c8c8c8cccd5cd19b87500148010848880048cccd5cd19b875002480088cc884888cc00c014010c028d5d0a8021bad357426ae8940108cccd5cd19b875003480008cccc88884888cccc00801c018014010c030d5d0a80418061aba15007301235742a00c6eb4d5d09aba250062326320663357380260840c80c60c426aae7540144d55cf280209aba25001135744a00226aae7940044dd5000919191999ab9a3370e6aae7540092000233221233001003002375c6ae854008c014d5d09aba2500223263205f3357380180760ba26aae7940044dd500091919191999ab9a3370ea002900111909118008019bae357426aae7940108cccd5cd19b875002480008cc88488cc00801000cc02cd5d0a80218039aba135744a008464c640c066ae700340f01781744d55cea80109aab9e500113754002464646666ae68cdc39aab9d5002480008cc150c01cd5d0a80119a8028031aba135744a004464c640ba66ae700280e416c4d55cf280089baa00112232323333573466e1d400520002350563005357426aae79400c8cccd5cd19b87500248008941588c98c8178cd5ce00581d02e02d89aab9d5001137540024646464646666ae68cdc3a800a4004466644424466600200a0080066eb4d5d0a8021bad35742a0066eb4d5d09aba2500323333573466e1d4009200023212230020033008357426aae7940188c98c8178cd5ce00581d02e02d89aab9d5003135744a00226aae7940044dd5000919191999ab9a3370ea00290011182a9bae357426aae79400c8cccd5cd19b875002480008c8488c00800cdd71aba135573ca008464c640b666ae700200dc1641604d55cea80089baa0012323333573466e1d40052002204e23333573466e1d40092000204e23263205933573800c06a0ae0ac26aae74dd5000919191999ab9a3370e6aae7540092000233221233001003002375c6ae854008dd71aba135744a004464c640b066ae700140d01584d55cf280089baa00149103505431003200135505222533500115005221350022233574066ec0d400888cdd2a400066ae80c138008cd5d018258009bb10593750002600c006640026aa0a244a66a0022a0084426a0044466ae80cdd818250011ba800130060033200135505022533500115003221350022233574066ec0c120008dd4000980300189bb204e23263204f33573892101770002b23263204e335738920101770002a3200135504c22222222533533333301404900600500450525052222221533500813332221222233333001007006005009008533500c104f10053335530221200150563500e0040073335530221200150560030062215333333500322101c101a222101d222101d22222101f22215333533330150100070050032221333333301505701300200100733355302a12001505e53350031505f222213503512233002122222333300400b00a00900800133355302a12001505e3501600c00f33355302a12001505e00b00e112222003101d112222004123333553014120015002225333335002133504b12222200500110012222133504f12222233330030090080070060052222213350501222223333300200a009008007006006222133504e122222333001008007006004001504a13350172223003300200120013200135504922222533500111222001232232133500422300300222300300223350062225335333300d00b00a003004221330080020011333300c00b00a00900525335333300b009008001002221330060020011333300a0090080070032233500522233500622012225335333573466e3c01000413012c4ccc04c01c01800c40488cd401088ccc0440140100048804088894ccd4008884ccd400c894cd4cc0d001000854cd4ccd54c06048004d4071407c8d4004894cd4ccd5cd19b8800600204804913300c006001104800113300b00e3500722223333036004333355019038008007003002001100a100a222200c20092222133350052200c22225335330390080041533533039007003153353303500600215335333573466e1c014ccc0c403002c0041281244cc03d4cd4ccd5cd19b890054800012412840484488cccc00401401801001cd402c8888cccc0e8cccc06c03002802401000c0080044038403840384038802c4ccd400488020888802894cd4ccc0ac0140100044cc02002c010401c88ccd5cd19b8900200103f03e22122330020040031220012221222333003006005004122200212200212222002320013550402222322225333553333335003221333301b5335333028008007002101f112222200501e00700113500522225335300e00421350012235002222333302302730253333028003303f003002001333303400400900800703e101e2221333301c02001f00853353330290090080031002100122323221333301e300250090213500a222233330330040033333550160380095007500d0010013200135504b225335001102222135002225335333573466e3c00802411c1184c8488888ccc00403c01c019401c4c01800c4ccc09c02001c004888c88c8c8c8854cd4ccd5cd19b8950044800011c1184cccc088c8488888cccc00c03c03803401940100940380044cccc0894cd4ccd5cd19b8850035004047046133221222223333300201000f00e0070065003500410263024333302700900800750033500e2222333303733500c2333301900100c50085007250070030020010011333301300700533702a008a0026a01844440082a66a666ae68cdc4a801a8008220218a8018a800899981500580500089a80411111998178038028021110a99a999ab9a337106a01244002004082080203a2a66a666ae68cdc48011a804910010208200999980e01000f80400088911001889100089991091199998010058020018048039a8048011a80480091110999999806021005001000a99999a802099a82480200308031111099a82680400511111099a827004805911099a826003804a99a80188029099a82500080309a8009111001099119801000a81f990009aa81f911299a80108009109980280099a820801001990009aa81f11299a8008a81c1109a801111a80111299a999ab9a33712006900001d81e09a81f99aa81489199800801801002002898040029111299a999ab9a33712004900001b81b08008999980280200199b80333021004003001002001223225335333573466e240052000036035123003001133355005223500222350032253353302b004002133027003001103b33550230040030013200135503e2253350011503e2213500222350022253353302b00200a15335330270010091005133504333550290040033008005133504333550290040033008005112222333355005004220010013500f1223300233550240050040011122223355300c1200123500122335502400233350012001223300800200120013335550050040020011112223335530051200150393355300a1200123500122335502200235500a001333553005120012235002225335333553008120013500c500f235001223300a0020050061003133503d004003503a0013355300a120012350012232335502300330010053200135503f225335001135500b003221350022253353300c002008112223300200a004130060030023200135503822112225335001135003220012213335005220023004002333553007120010050040013200135503722112225335001100222133005002333553007120010050040011121222300300411212223001004123350022233350032200200200135001220011221233001003002320013550322211225335001150342213350353004002335530061200100400111233001225335002102a100102712335001502e502f122200222221222333300100700600500412200221223001003122222004222212333300100500400300223263202a335738921016f000062326320293357389201016f000052326320283357389201016f000042326320273357389201016f000032326320263357389201016f00002120013500222001350012200235555022122233003222533333333333500122153353330070050040021333007005004001101e2321300135004222200332001355028225335001101f2213500222533533012002007102413006003101c215335333006004003001101d101e2215335333007005004002101f1333007005004001101d221333573466e1cccc018014010008ccc01801401000407c078884ccd5cd19b8833300600500400233300600500400101e01f221333573466e24ccc018014010008ccc01801401000407807c884ccd5cd19b8933300600500400233300600500400101f01e221333573466e20ccc018014010008ccc01801401000407c0788894cccccccccccd4004884cdc01998030028020011998030028020009109a8021111199806803002802119098009a8021111001990009aa8141119a800a4000446a00444a66a6602400400e20022600c0064442a66a66601000c00a006266600e00c00a004266600e00c00a0024200244642a66a666ae68cdc3a800a400004003e29000099b84333007006005003500113330060050040012213370466600c00a00800466600c00a0080024266e0520003330050040030012213370266600c00a00800466600c00a00800226a0064400226a00644004464260026a0084444004640026aa0504466a0029000111a80111299a999ab9a3371e00400e04804620022600c006446446004002640026aa0444466a0029000111a801111a80111299a998078010050a99a9980580080488018980400289804002911a801111a80191299a999ab9a3371e0080040360342660180060022034444424666600200a00800600422442466002006004446a004446a00644a66a666ae68cdc780200100c00b899803801800880b9119a8011119a80191299a8020a99a801099803801800880b0a99a801080b099803801800900a919a8011100a919803001000911a801111a801911919a802919a8021299a999ab9a3371e0040020320302a00620304030466a00840304a66a666ae68cdc780100080c80c0a801880c0a99a80190a99a8011099a801119a801119a801119a801119806801000900d919a801100d91980680100091100d91119a802100d911299a999ab9a3370e00c00603c03a2a66a666ae68cdc380280100f00e899808002000880e880e880b0a99a8009080b080b11199ab9a3371e00400202202044666ae68cdc38010008080079a801110009a800910011aaaa80b09111980192999999a80091099ba548028cd5d0180500119aba030050013762034266e9520003762030444266e952004335740601600666ae80c018008cd5d018030009bb101b22213374a900419aba0300e00333574066a60182400201600466ae80c018004dd880d91111099ba548008cd5d0180900299aba033500423374a900019aba03013001376203c466e95200233574060260026ec4078cd5d0180780199aba0335300e1200100d00233574060100026ec40748884cdd2a400c66ae80dd3980280199aba0375000466ae80c018004dd880d9299a80089bb101822133574066a0044466e952000335740601600466ae80c01c004dd880e1119ba548008cd5d0180580119aba037520026ec4070c01000448888880148488c00400c8ccd400488cdd2a400466ae80c020008cd5d01ba730110013762028444466e952000335740601600866ae80c02c00ccd5d0180400119aba0335300712001006001376202c466e95200433574060060026ec404cc8004d54044894ccccccccccd4004884cdd2a400066ae80c010008cd5d018020009bb1014213374a900319aba030070013762026266e95201437620244266e95200433574060060026ec404c884cdd2a400466ae80c010008cd5d018020009bb101413374a90091bb10122213374a900819aba033530051200100400233574066a600a240020080026ec4050884cdd2a401066ae80cd4c01448004010008cd5d019a9802890008020009bb10142213374a900519aba033530051200100400233574066a600a240020080026ec4050884cdd2a401c66ae80cd4c01448004010008cd5d019a9802890008020009bb10142213374a900619aba033530051200100400233574066a600a240020080026ec4050c8004d54040884894cccccccccccd4004884cdd2a400c66ae80cd4c01848004010008cd5d019a9803090008020009bb10152213374a900019aba0300a002335740600e0026ec405484cdd2a401c66ae80c020004dd880a111099ba548058cd5d0180280199aba033530071200100500233574066a600e2400200a0026ec405884cdd2a400466ae80dd40009bb10142213374a900619aba033530061200100400233574066a600c240020080026ec4054884cdd2a401466ae80cd4c01848004010008cd5d019a9803090008020009bb1015213374a900219aba0335300512001003001376202844266e95200833574066a600c2400200800466ae80cd4c01848004010004dd880a899ba548048dd8809899ba548040dd88099099ba548050cd5d018038009bb1014235001223374a900019aba0375200466ae80dd48009bb101123374a900019aba037520026ec40388d400488cdd2a400066ae80dd480119aba03004001376201e466a0024466e952000335740a66a004266e952002376201c266e952000376201c66ae80d400488cdd2a400066ae80c02c008cd5d0299a8009099ba548000cd5d019a800919ba548000cd5d018068009bb10122223374a900119aba0375000666ae80dd400119aba037500026ec4050dd8808899ba548008dd88081bb1010376201c466e9520023357406ea4004dd88068910010910009109198008018010909118010018891000919a800919ba548000cd5d01ba9001376200e466e9520023357406ea4004dd880390911800801990009aa80211299a80089bb10052213357406a0044466e9520003357406ea0008cd5d01ba80013762012600800222440042442446600200800693089191800800911980198010010008888919918008009119091a99091980091a80191180100191a801911800801891a98018021a8020008009801001000a451c49076eab20243dc9462511fb98a9cfb719f86e9692288139b7c91df30001"

auditV1PayoutScriptCBOR :: ByteString
auditV1PayoutScriptCBOR = either (error . T.unpack) id $ decodeBase16 "590a73590a70010000332323232323232323232323232323322323232323222223232533533300632323333573466e1cd55cea80124000466aa0226eb8d5d0a8011bae357426ae8940088c98c8070cd5ce00e80e00d09aab9e50011375400a6666ae68cdc39aab9d37540089000100d11931900d19ab9c01b01a0183333573466e1cd55cea80124000466442466002006004646464646464646464646464646666ae68cdc39aab9d500c480008cccccccccccc88888888888848cccccccccccc00403403002c02802402001c01801401000c008cd405805cd5d0a80619a80b00b9aba1500b33501601835742a014666aa034eb94064d5d0a804999aa80d3ae501935742a01066a02c0446ae85401cccd5406808dd69aba150063232323333573466e1cd55cea801240004664424660020060046464646666ae68cdc39aab9d5002480008cc8848cc00400c008cd40b5d69aba15002302e357426ae8940088c98c80c0cd5ce01881801709aab9e5001137540026ae854008c8c8c8cccd5cd19b8735573aa004900011991091980080180119a816bad35742a004605c6ae84d5d1280111931901819ab9c03103002e135573ca00226ea8004d5d09aba2500223263202c33573805a05805426aae7940044dd50009aba1500533501675c6ae854010ccd5406807c8004d5d0a801999aa80d3ae200135742a00460426ae84d5d1280111931901419ab9c029028026135744a00226ae8940044d5d1280089aba25001135744a00226ae8940044d5d1280089aba25001135744a00226ae8940044d55cf280089baa00135742a00460226ae84d5d1280111931900d19ab9c01b01a018101913263201933573892010350543500019135573ca00226ea800448c88c008dd6000990009aa80a911999aab9f0012500a233500930043574200460066ae880080548c8c8cccd5cd19b8735573aa004900011991091980080180118069aba150023005357426ae8940088c98c8054cd5ce00b00a80989aab9e5001137540024646464646666ae68cdc39aab9d5004480008cccc888848cccc00401401000c008c8c8c8cccd5cd19b8735573aa0049000119910919800801801180b1aba15002335010015357426ae8940088c98c8068cd5ce00d80d00c09aab9e5001137540026ae854010ccd54021d728039aba150033232323333573466e1d4005200423212223002004357426aae79400c8cccd5cd19b875002480088c84888c004010dd71aba135573ca00846666ae68cdc3a801a400042444006464c6403866ae700740700680640604d55cea80089baa00135742a00466a018eb8d5d09aba2500223263201633573802e02c02826ae8940044d5d1280089aab9e500113754002266aa002eb9d6889119118011bab00132001355012223233335573e0044a010466a00e66aa012600c6aae754008c014d55cf280118021aba20030131357420022244004244244660020080062244246600200600424464646666ae68cdc3a800a40004642446004006600a6ae84d55cf280191999ab9a3370ea0049001109100091931900819ab9c01101000e00d135573aa00226ea80048c8c8cccd5cd19b875001480188c848888c010014c01cd5d09aab9e500323333573466e1d400920042321222230020053009357426aae7940108cccd5cd19b875003480088c848888c004014c01cd5d09aab9e500523333573466e1d40112000232122223003005375c6ae84d55cf280311931900819ab9c01101000e00d00c00b135573aa00226ea80048c8c8cccd5cd19b8735573aa004900011991091980080180118029aba15002375a6ae84d5d1280111931900619ab9c00d00c00a135573ca00226ea80048c8cccd5cd19b8735573aa002900011bae357426aae7940088c98c8028cd5ce00580500409baa001232323232323333573466e1d4005200c21222222200323333573466e1d4009200a21222222200423333573466e1d400d2008233221222222233001009008375c6ae854014dd69aba135744a00a46666ae68cdc3a8022400c4664424444444660040120106eb8d5d0a8039bae357426ae89401c8cccd5cd19b875005480108cc8848888888cc018024020c030d5d0a8049bae357426ae8940248cccd5cd19b875006480088c848888888c01c020c034d5d09aab9e500b23333573466e1d401d2000232122222223005008300e357426aae7940308c98c804ccd5ce00a00980880800780700680600589aab9d5004135573ca00626aae7940084d55cf280089baa0012323232323333573466e1d400520022333222122333001005004003375a6ae854010dd69aba15003375a6ae84d5d1280191999ab9a3370ea0049000119091180100198041aba135573ca00c464c6401866ae700340300280244d55cea80189aba25001135573ca00226ea80048c8c8cccd5cd19b875001480088c8488c00400cdd71aba135573ca00646666ae68cdc3a8012400046424460040066eb8d5d09aab9e500423263200933573801401200e00c26aae7540044dd500089119191999ab9a3370ea00290021091100091999ab9a3370ea00490011190911180180218031aba135573ca00846666ae68cdc3a801a400042444004464c6401466ae7002c02802001c0184d55cea80089baa0012323333573466e1d40052002212200223333573466e1d40092000212200123263200633573800e00c00800626aae74dd5000a4c240029201035054310011232300100122330033002002001323233223232323232332232323233223232322223500322323233355300e12001350145013235001223335530111200135017501623500122333500123301d4800000488cc0780080048cc074005200000133008002001323500122222222222233355301a12001335021223355301b120012350012233550230023355301e12001235001223355026002333500123302e4800000488cc0bc0080048cc0b8005200000133016002001501d2350012235001222200300c350042200233500e335501000233500e335501000148009403d403c88cd54c01c480048d400488cd5403c008ccd40048cd54c02c480048d400488cd5404c008d5403400400488ccd5540200380080048cd54c02c480048d400488cd5404c008d54030004004ccd55400c024008004444888ccd54c010480054028cd54c01c480048d400488cd5403c008d54024004ccd54c0104800488d4008894cd4ccd54c03048004c8cd405088ccd400c88008008004d40048800448cc004894cd4008406440040588d400488cc028008014018400c4cd403801000d402c004cd54c01c480048d400488c8cd5404000cc004014c8004d5405c894cd40044d5402800c884d4008894cd4cc03000802044888cc0080280104c01800c008c8004d5404088448894cd40044008884cc014008ccd54c01c480040140100044484888c00c0104484888c004010c8004d540348844894cd400454020884cd4024c010008cd54c01848004010004c8004d5403088448894cd40044d400c88004884ccd401488008c010008ccd54c01c4800401401000488ccd5cd19b8f00200100b00a11220021221223300100400311221233001003002112330012253350021001100700612335002223335003220020020013500122001122123300100300222333573466e2400800401000c48800848800488cdc0001000889191800800911980198010010009"

-- | The set of known script hash sets for Marlowe V1.
v1Scripts :: Set MarloweScripts
v1Scripts = Set.fromList [currentV1Scripts, auditV1Scripts]

-- | Key a set of script hash sets by their Marlowe script hashes.
toScriptMap :: Set MarloweScripts -> Map ScriptHash MarloweScripts
toScriptMap  = Map.mapKeys marloweScript . Map.fromSet id

-- | The map of script hash sets for Marlowe V1 keyed by their Marlowe script
-- hash.
v1ScriptMap :: Map ScriptHash MarloweScripts
v1ScriptMap = toScriptMap v1Scripts

-- | Lookup the Marlowe version and script hash set associated with the given
-- Marlowe script hash.
getMarloweVersion :: ScriptHash -> Maybe (SomeMarloweVersion, MarloweScripts)
getMarloweVersion hash = asum
  [ (SomeMarloweVersion MarloweV1,) <$> Map.lookup hash v1ScriptMap
  ]

-- | Get the set of known script hash sets associated with the given Marlowe
-- version.
--
-- NOTE Membership of the current script addresses is enforced in the test
-- suite.
getScripts :: MarloweVersion v -> Set MarloweScripts
getScripts = \case
  MarloweV1 -> v1Scripts

-- | Get the current script hash set for the given Marlowe version as of the
-- current git commit.
--
-- NOTE: Enforced in the test suite.
getCurrentScripts :: MarloweVersion v -> MarloweScripts
getCurrentScripts = \case
  MarloweV1 -> currentV1Scripts
