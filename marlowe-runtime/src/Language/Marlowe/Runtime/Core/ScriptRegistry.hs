{-# LANGUAGE GADTs #-}
{-# OPTIONS_GHC -Wno-orphans #-}

module Language.Marlowe.Runtime.Core.ScriptRegistry
  where

import Cardano.Api (AsType(..), NetworkId(..), NetworkMagic(..), PlutusScript, PlutusScriptV2, SerialiseAsCBOR(..))
import Data.Aeson (ToJSON(..))
import Data.ByteString (ByteString)
import Data.ByteString.Base16 (decodeBase16)
import Data.Foldable (asum)
import Data.Map (Map)
import qualified Data.Map as Map
import Data.Maybe (fromJust)
import Data.Set (Set)
import qualified Data.Set as Set
import qualified Data.Text as T
import Language.Marlowe.Runtime.ChainSync.Api (Assets(..), Datum(..), ScriptHash, TxOutRef, fromBech32)
import qualified Language.Marlowe.Runtime.ChainSync.Api as Chain
import Language.Marlowe.Runtime.Core.Api

instance Ord NetworkId where
  compare Mainnet Mainnet = EQ
  compare Mainnet _ = LT
  compare _ Mainnet = GT
  compare (Testnet (NetworkMagic a)) (Testnet (NetworkMagic b)) =
    compare a b

data ReferenceScriptUtxo = ReferenceScriptUtxo
  { txOutRef :: TxOutRef
  , txOut :: Chain.TransactionOutput
  , script :: PlutusScript PlutusScriptV2
  } deriving (Show, Eq, Ord)

instance ToJSON ReferenceScriptUtxo where
  toJSON ReferenceScriptUtxo{..} = toJSON txOutRef

-- | A set of script hashes for a marlowe version.
data MarloweScripts = MarloweScripts
  { marloweScript :: ScriptHash
  , payoutScript :: ScriptHash
  , marloweScriptUTxOs :: Map NetworkId ReferenceScriptUtxo
  , payoutScriptUTxOs :: Map NetworkId ReferenceScriptUtxo
  } deriving (Show, Eq, Ord)

mainnetNetworkId :: NetworkId
mainnetNetworkId = Mainnet

preprodNetworkId :: NetworkId
preprodNetworkId = Testnet $ NetworkMagic 1

previewNetworkId :: NetworkId
previewNetworkId = Testnet $ NetworkMagic 2

-- | The current pair of static script hashes for Marlowe V1 as of the current git
-- commit. Enforced in the test suite for the Marlowe Runtime.
--
-- STOP Are you here to change this value to fix a test failure? Before you do
-- so, please copy the current value into 'v1Scripts' before updating
-- it to the new one (unless you are certain that the address here has never
-- been published).
--
-- DO NOT ALTER THE FOLLOWING VALUE UNLESS YOU ARE COMMITTING
-- APPROVED CHANGES TO MARLOWE'S SCRIPT REGISTRY. THIS VALUE HAS
-- IMPLICATIONS FOR VERSIONING, SECURITY, AND CONTRACT DISCOVERY.
currentV1Scripts :: MarloweScripts
currentV1Scripts = MarloweScripts
  { marloweScript = "8755bd9a8e2a0eb987ab4dae0b0d967a59121f69cf4de096d0893255"
  , payoutScript = "49076eab20243dc9462511fb98a9cfb719f86e9692288139b7c91df3"
  , marloweScriptUTxOs = Map.fromList []
  , payoutScriptUTxOs = Map.fromList []
  }

currentV1MarloweScriptCBOR :: ByteString
currentV1MarloweScriptCBOR = either (error . T.unpack) id $ decodeBase16 "593215593212010000332323233223232323322323322323232323232323232323232323232323232323232323232323232323232323233223322323232323233223232323232323232323232323322332232323232323232323232323232323232323232323232323232323232323232323232323232323232332232323232323232323232323232323232322322223232533533322235003223232235006232323232323223353235001223500223223355335333573466e2000400c25404250044c0c8c8488c00400ccd542080400c00454cd4ccd5cd19b880015011095010940113032332212233002004003501133550820100300113322122330010040033355082015002001350122222333308501004003002500623031122222300200622533335333333305509601002001011006509f01509f01130321222220051303212222200313032122222004222221533500513333036004003002001153333335016221303903a135019222253353333553072120015060220a1010040a0011303b03c1333303a0080070060052221303a03b2221303a03b222221303c03d2221303a03b15335333573466e24005403c24c04248045403c4004cc8848cc00400c0094cd4c8d400488d4008894ccd400884d4010894ccd400884d426c04cd5421404cdc099b8000448008c0d8014cdc019b8100148008c0d80085426404542640454258045425804d4020888888888888014840044c98c826404cd5ce24901610007550062533333500113263209a0133573892101690007613263209a013357389201016e0007613263209a013357389201016d0007621335001223263209d01335738921016b0007923263209c013357389201016a0007813263209a013357389201017500076223232323232322253355335533535016222233355306f120013503e503d23500122333573466e24005200009f010a00100410990113357389201016200098011533533303808b015014353535500e220022200122220031099011335738921017600098011098011533533355306b120013503a503925333500122135002223016001222213016003109a01500f1533533355306b120013503a50392350012233500222533533303d061003333553070120015028235001222200333355307112001225335330900135002222200400313350a701002001100150a6015011109e011335738920101700009d012533533355306f1200135073507623500122225333500210a101210a20121533533304222333573466e20008004290042940401002054cd54cd4cc0ecc8d400488cdd2a400066ae80dd480119aba037520026ec42bc04cd542400408401c07084cc254040040084288044cc24c04014cc29004c2a0040ad42940442880442880540404274044cd5ce248101720009c0150081533333350012215335533535533533355306e120012253353500222223309101501500413350a401002001100150a301500e1307c4988854cd40044008884c2000526222253335002109e012109f0121533533303f09201004500a15335533533038304933304a01e009008019213309201001002109f01133090010055014109f01109f01109b01133573892101640009a011533533303a08d0130243500422220045005109b011335738920101660009a01109a011533533355306b120013503a5039253353308a01350012222004500e109901109a01500c109901133573892010163000980122215335533535533533355306f120012253353500222223309201501600413350a501002001100150a401500f1307e4988854cd40044008884c2080526222253335002109f01210a00121533533304009301004500c15335533533039304a33304b01f00a00901a21330930100100210a00113309101005501510a00110a001109c011335738920101640009b011533533303b08e0130253500522220045007109c011335738920101660009b01109b0122215335533535533533355306f120012253353500222223309201501600413350a501002001100150a401500f1307f4988854cd40044008884c20c0526222253335002109f01210a00121533533304009301004500d15335533533039304a33304b01f00a00901a21330930100100210a00113309101005501510a00110a001109c011335738920101640009b011533533303b08e0130253500522220045008109c011335738920101660009b01109b0122222153355335355335333553071120012253353500222223309401501800413350a701002001100150a601501113082014988854cd40044008884c218052622225333500210a101210a2012153353330420950100450101533553353303b304c33304d02100c00b01c21330950100100210a20113309301005501710a20110a201109e011335738920101640009d011533533303d090013027350072222004500b109e011335738920101660009d01109d0122215335533535533533355306f120012253353500222223309201501600413350a501002001100150a401500f13081014988854cd40044008884c2140526222253335002109f01210a00121533533304009301004500f15335533533039304a33304b01f00a00901a21330930100100210a00113309101005501510a00110a001109c011335738920101640009b011533533303b08e013025350052222004500a109c011335738920101660009b01109b011098011098011098011333022023333022023501133355306812001502025333500122150a1012222135002225335333573466e2400d200009c0109d0113350a401335508a010023350a401335508a0100100350a50150a501150a5011509f01500c330420433335530681200150205502450051333021022333021022501033355306712001501f25333500122150a0012222135002225335333573466e2400d200009b0109c0113350a3013355089010023350a30133550890100100350a40150a401150a4011509e01500b3304104233355306712001501f5502350041333020021333020021500f33355306612001501e253335001221509f012222135002225335333573466e2400d200009a0109b0113350a2013355088010023350a20133550880100100350a30150a301150a3011509d01500a3304004133355306612001501e550225003133301f02033301f020500e33355306512001501d253335001221509e012222135002225335333573466e2400d20000990109a0113350a1013355087010023350a10133550870100100350a20150a201150a2011509c0150093303f04033355306512001501d550215002133301e01f33301e01f500d33355306412001501c253335001221509d012222135002225335333573466e2400d2000098010990113350a0013355086010023350a00133550860100100350a10150a101150a1011509b0150083303e03f33355306412001501c55020500113335530631200132335069335506208101001509a01501c23500122223350032509f01235003225335333573466e240112000098010990113350a0013355086010033350a0013355086010023350a00133550860100100450a10150a10150a101150a10100113500622222222222200a13550012200113553353500a22350022222222222223333500d2509c012509c012509c01233355306c1200150332533535001223304800200413509e010011509d0100d21533533355305f120012253353500322350012222350042233500220960123500b223500122223500422335002209f012330910100a00113350950100200110015094013500522222222222200c130484988854cd40044008884c1312613263209501335738920101780007122350012222335507e53353501022350022222222222223333500d250a201250a201250a20123335530721200150392533535001223304e0020041350a401001150a30100d2153353335530651200122533535003223500122223500422335002209c0123500b22350012222350042233500220a5012330970100a001133509b010020011001509a013500b22222222222200c1304f4988854cd40044008884c14d2613263209b0133573892101780007700413355306212001233500122200320015001133553061120012335001212230010032232533535006222222222222300d00221321223330020070060033031001132632097013357389210168000733200135509601225335001150900122135002225335333573466e3c00801c24804244044d4254040044c01800c0248cd4004894cd4d400488cd40088d401c8888888888894cd4ccd54c1b04800540cc94cd4ccd5cd19b8f00e00109b0109a0113509e010011509d010042109b01109901208d01108b01133573892101730008a012533533302904d33509101335507700833509101335507700148009424805424804d400c888888888888ccd54c1a04800540808d400488d4004888800c0304228044cd5ce2481017400089011300e35002222200413500122220013232323333573466e1cd55cea801a4000466605a64646666ae68cdc39aab9d5001480008dd71aba135573ca004464c641200266ae700f41b0238044dd50009aba1500332323232323333573466e1cd55cea80224000466660ea666aa036464646666ae68cdc39aab9d5002480008cd541e8c0f4d5d0a80118219aba135744a004464c6412e0266ae701101cc254044d55cf280089baa00175a6ae854010ccd5406c0e1d69aba150033335501b03175a6ae854008dd69aba135744a004464c641260266ae701001bc244044d5d1280089aba25001135573ca00226ea8004d5d0a80118131aba135744a004464c6411a0266ae700e81a422c044d5d1280089aab9e50011375400a600c0086666ae68cdc39aab9d5002480008cc8848cc00400c008c8c8c8c8c8c8c8c8c8c8c8c8c8cccd5cd19b8735573aa018900011999999999999111111111110919999999999980080680600580500480400380300280200180119a81980e9aba1500c33503301d35742a01666a06603c6ae854028ccd54081d7280f9aba150093335502075ca03e6ae854020cd40cc090d5d0a803999aa810020bad35742a00c6464646666ae68cdc39aab9d5002480008cc8848cc00400c008c8c8c8cccd5cd19b8735573aa004900011991091980080180119a816bad35742a00460966ae84d5d128011193190500099ab9c04d07c09e01135573ca00226ea8004d5d0a8011919191999ab9a3370e6aae754009200023322123300100300233502d75a6ae854008c12cd5d09aba250022326320a00133573809a0f813c0226aae7940044dd50009aba135744a004464c641380266ae701241e0268044d55cf280089baa00135742a00a66a066eb8d5d0a802199aa81001090009aba150033335502075c40026ae854008c08cd5d09aba250022326320980133573808a0e812c0226ae8940044d5d1280089aba25001135744a00226ae8940044d5d1280089aba25001135744a00226ae8940044d5d1280089aab9e5001137540026ae854008c04cd5d09aba2500223263208a0133573806e0cc1100220ca264c641120266ae7124010350543500065135573ca00226ea8004d40788c8c8c8cccd5cd19b875001480088cc88488cc00401000cc0b0d5d0a8019bae357426ae89400c8cccd5cd19b875002480008c8488c00800cc0b4d5d09aab9e50052326320890133573806c0ca10e0210c0226aae7540084d55cf280089baa001233355304a120015002235001223500222350012233508601335506c00233508601335506c001005508701508701001133504d5001507e130010022223355304f12001235001223355067002335530521200123500122335506a002333500123300a4800000488cc02c0080048cc02800520000013301900200122337000040022246a00244002464646666ae68cdc39aab9d5002480008cc8848cc00400c008c024d5d0a80118029aba135744a004464c640fe66ae700b016c1f44d55cf280089baa0012323232323333573466e1cd55cea8022400046666444424666600200a008006004604e6ae854010ccd54021d728039aba150033232323333573466e1d4005200423212223002004357426aae79400c8cccd5cd19b875002480088c84888c004010dd71aba135573ca00846666ae68cdc3a801a400042444006464c6410c0266ae700cc1882100420c04208044d55cea80089baa00135742a00466a050eb8d5d09aba250022326320800133573805a0b80fc26ae8940044d5d1280089aab9e500113754002266aa002eb9d6889119118011bab0013200135507a223233335573e0044a0f8466a0f666aa0c2600c6aae754008c014d55cf280118021aba2003059135742002464646666ae68cdc3a800a400c46424444600800a600e6ae84d55cf280191999ab9a3370ea004900211909111180100298129aba135573ca00846666ae68cdc3a801a400446424444600200a600e6ae84d55cf280291999ab9a3370ea00890001190911118018029bae357426aae7940188c98c81f8cd5ce01582d03e03d83d03c89aab9d500113754002464646666ae68cdc39aab9d5002480008cc8848cc00400c008c014d5d0a8011bad357426ae8940088c98c81e8cd5ce01382b03c09aab9e5001137540024646666ae68cdc39aab9d5001480008dd71aba135573ca004464c640f066ae700941501d84dd5000919191919191999ab9a3370ea002900610911111100191999ab9a3370ea004900510911111100211999ab9a3370ea00690041199109111111198008048041bae35742a00a6eb4d5d09aba2500523333573466e1d40112006233221222222233002009008375c6ae85401cdd71aba135744a00e46666ae68cdc3a802a400846644244444446600c01201060506ae854024dd71aba135744a01246666ae68cdc3a8032400446424444444600e01060526ae84d55cf280591999ab9a3370ea00e900011909111111180280418151aba135573ca018464c641020266ae700b81741fc1f81f41f01ec1e81e44d55cea80209aab9e5003135573ca00426aae7940044dd500089119191999ab9a3370ea00290021091100091999ab9a3370ea00490011190911180180218031aba135573ca00846666ae68cdc3a801a400042444004464c640f466ae7009c1581e01dc1d84d55cea80089baa0012235001222222222222533533355304812001500f235001225335333573466ebc0040441e41e04d41f000c541ec00884d41e8d400488008541e04cd40f8894cd40088400c400541a48488c00800c8888488cccc00401801401000c4888880048488c00800c8cd4005200248000888ccd54c0d848004d401540108d400488ccd54c0e448004d4021401c8d400488ccd40048cc0292000001223300b00200123300a00148000004cc018008004448cc004894cd40084004418818448cd40dc88ccd400c88008008004d40048800488cd54c0e0480048d400488cd54140008ccd40048cd54c0f0480048d400488cd54150008d540f000400488ccd5540d81580080048cd54c0f0480048d400488cd54150008d540ec004004ccd5540c4144008004c8004d5419c88c8c8c8c8c8c8c8c8c8c8c8c8c8cccd5cd19b875001480288cc884888888cc01802001cc04cd5d0a80198081aba135744a00646666ae68cdc3a801240104666444244444466600601201000e602c6ae854018cd4c05448004050d5d0a80298089aba135744a00a46666ae68cdc3a801a400c4666444244444466600201201000e66a0284646464646666ae68cdc3a800a4004466442446600200800660326ae85400cdd71aba135744a00646666ae68cdc3a80124000466442446600400800660346ae854014c064d5d09aba250052326320800133573805a0b80fc0fa26aae75400c4d55cf280109aab9e5001137540026ae854024dd69aba150083012357426ae8940208cccd5cd19b875004480108ccc8884888888ccc01002402001cc058d5d0a80618099aba1500b3013357426ae89402c8cccd5cd19b875005480088ccccc888884888888ccccc00802c02802402001cc084d5d0a8089919191999ab9a3370ea00290011183618129aba135573ca00646666ae68cdc3a801240004642446004006604c6ae84d55cf28021193190400099ab9c02d05c07e07d135573aa00226ea8004d5d0a80818139aba1500f33530181200101735742a01c60286ae84d5d1280711999ab9a3370ea00c9000103411931903e19ab9c02905807a079078077076075135573aa01826aae79402c4d5d1280089aab9e5009135744a00226aae79401c4d5d1280089aab9e5005135744a00226ae8940044d5d1280089aab9e50011375400246464646464646666ae68cdc3a800a40084642444600200860146ae84d55cf280391999ab9a3370ea004900111991091119801802802180a1aba1500433500a232323333573466e1cd55cea801240004664424660020060046eb4d5d0a8011bad357426ae8940088c98c81cccd5ce01002783889aab9e5001137540026ae84d5d1280211999ab9a3370ea006900011999911109111999801003803002802180b1aba15008301635742a00e60386ae854018cd4c03448004030d5d09aba2500623263207033573803a0980dc0da0d826aae7540144d55cf280209aba25001135744a00226aae7940044dd50008919118011bac001320013550662233335573e0024a0ce466a0cc60086ae84008c00cd5d1001022190009aa832111919191919191919191999ab9a3370ea002900a109111111111100491999ab9a3370ea0049009109111111111100311999ab9a3370ea0069008119910911111111111980280680619a9807890008071aba15005335300f1200100e357426ae8940148cccd5cd19b875004480388cc88488888888888cc008034030cd4c0404800403cd5d0a80399a9808090008079aba135744a00e46666ae68cdc3a802a4018466442444444444446600201a01866a6022240020206ae854024cd4c04448004040d5d09aba2500923333573466e1d4019200a233221222222222223300300d00c33530121200101135742a01666a6024240020226ae84d5d1280591999ab9a3370ea00e9004119910911111111111980200680619a9809890008091aba1500d335301312001012357426ae8940348cccd5cd19b875008480188c8488888888888c028030c070d5d09aab9e501123333573466e1d40252004232122222222222300800c3014357426aae7940488cccd5cd19b87500a480088cc88488888888888cc01c034030c054d5d0a808980a9aba135744a02246666ae68cdc3a805a4000466442444444444446601601a018602c6ae85404cc058d5d09aba2501323263207a33573804e0ac0f00ee0ec0ea0e80e60e40e20e00de0dc26aae7540204d55cf280389aab9e5006135573ca00a26aae7940104d55cf280189aab9e5002135573ca00226ea8004c8004d5418c88488c8c8c8c8c8c8c8c8c8cccd5cd19b875001480588ccc8884888888888888ccc02403c038034c030d5d0a80219a9807090008061aba15003335300e1200100c357426ae89400c8cccd5cd19b875002480508c84888888888888c004034c040d5d09aab9e500b23333573466e1d400d20122122222222222200323333573466e1d401120102122222222222200223333573466e1d4015200e2321222222222222300a00d301a357426aae7940388cccd5cd19b875006480308cc884888888888888cc01c038034cd4c04c48004044d5d0a80519a9809890008089aba135744a01446666ae68cdc3a803a40144664424444444444446600c01c01a66a6028240020246ae854030cd4c05048004048d5d09aba2500c23333573466e1d402120082332212222222222223300400e00d33530151200101335742a01c66a602a240020266ae84d5d1280711999ab9a3370ea01290031199109111111111111980600700699a980b0900080a1aba15010335301612001014357426ae8940408cccd5cd19b87500a480108c84888888888888c014034cd4c05c48004054d5d09aab9e501323333573466e1d402d20022321222222222222300800d375a6ae84d55cf280a11999ab9a3370ea01890001199109111111111111980580700698111aba150143028357426ae8940508c98c81f0cd5ce01482c03d03c83c03b83b03a83a03983903883803789aab9d5008135744a00226aae7940184d55cf280289aab9e5004135573ca00626aae7940084d55cf280089baa0012323333573466e1cd55cea800a400046eb8d5d09aab9e50022326320653357380240820c626ea80048d4004888cdd2a400066ae80cdd2a400066ae80dd48019bb10643357406a004444466e9520003357406e98c05c010cd5d01ba630180033357406e98c064008cd5d01ba800137620d066ae80c13c004dd88321110919980080200180111299a999ab9a3371e6a004440046a002440040ae0ac2666ae68cdc39a801110009a8009100082b82b082b1119aa98170900091a8009119aa82300119aa98188900091a8009119aa82480119b82008001001001480048c8c8c8c8c8c8cccd5cd19b87500148010848880048cccd5cd19b875002480088cc884888cc00c014010c028d5d0a8021bad357426ae8940108cccd5cd19b875003480008cccc88884888cccc00801c018014010c030d5d0a80418061aba15007301235742a00c6eb4d5d09aba250062326320663357380260840c80c60c426aae7540144d55cf280209aba25001135744a00226aae7940044dd5000919191999ab9a3370e6aae7540092000233221233001003002375c6ae854008c014d5d09aba2500223263205f3357380180760ba26aae7940044dd500091919191999ab9a3370ea002900111909118008019bae357426aae7940108cccd5cd19b875002480008cc88488cc00801000cc02cd5d0a80218039aba135744a008464c640c066ae700340f01781744d55cea80109aab9e500113754002464646666ae68cdc39aab9d5002480008cc150c01cd5d0a80119a8028031aba135744a004464c640ba66ae700280e416c4d55cf280089baa00112232323333573466e1d400520002350563005357426aae79400c8cccd5cd19b87500248008941588c98c8178cd5ce00581d02e02d89aab9d5001137540024646464646666ae68cdc3a800a4004466644424466600200a0080066eb4d5d0a8021bad35742a0066eb4d5d09aba2500323333573466e1d4009200023212230020033008357426aae7940188c98c8178cd5ce00581d02e02d89aab9d5003135744a00226aae7940044dd5000919191999ab9a3370ea00290011182a9bae357426aae79400c8cccd5cd19b875002480008c8488c00800cdd71aba135573ca008464c640b666ae700200dc1641604d55cea80089baa0012323333573466e1d40052002204e23333573466e1d40092000204e23263205933573800c06a0ae0ac26aae74dd5000919191999ab9a3370e6aae7540092000233221233001003002375c6ae854008dd71aba135744a004464c640b066ae700140d01584d55cf280089baa001490103505431003200135505222533500115005221350022233574066ec0d400888cdd2a400066ae80c138008cd5d018258009bb10593750002600c006640026aa0a244a66a0022a0084426a0044466ae80cdd818250011ba800130060033200135505022533500115003221350022233574066ec0c120008dd4000980300189bb204e23263204f33573892101770002b23263204e335738920101770002a3200135504c22222222533533333301404900600500450525052222221533500813332221222233333001007006005009008533500c104f10053335530221200150563500e0040073335530221200150560030062215333333500322101c101a222101d222101d22222101f22215333533330150100070050032221333333301505701300200100733355302a12001505e53350031505f222213503512233002122222333300400b00a00900800133355302a12001505e3501600c00f33355302a12001505e00b00e112222003101d112222004123333553014120015002225333335002133504b12222200500110012222133504f12222233330030090080070060052222213350501222223333300200a009008007006006222133504e122222333001008007006004001504a13350172223003300200120013200135504922222533500111222001232232133500422300300222300300223350062225335333300d00b00a003004221330080020011333300c00b00a00900525335333300b009008001002221330060020011333300a0090080070032233500522233500622012225335333573466e3c01000413012c4ccc04c01c01800c40488cd401088ccc0440140100048804088894ccd4008884ccd400c894cd4cc0d001000854cd4ccd54c06048004d4071407c8d4004894cd4ccd5cd19b8800600204804913300c006001104800113300b00e3500722223333036004333355019038008007003002001100a100a222200c20092222133350052200c22225335330390080041533533039007003153353303500600215335333573466e1c014ccc0c403002c0041281244cc03d4cd4ccd5cd19b890054800012412840484488cccc00401401801001cd402c8888cccc0e8cccc06c03002802401000c0080044038403840384038802c4ccd400488020888802894cd4ccc0ac0140100044cc02002c010401c88ccd5cd19b8900200103f03e22122330020040031220012221222333003006005004122200212200212222002320013550402222322225333553333335003221333301b5335333028008007002101f112222200501e00700113500522225335300e00421350012235002222333302302730253333028003303f003002001333303400400900800703e101e2221333301c02001f00853353330290090080031002100122323221333301e300250090213500a222233330330040033333550160380095007500d0010013200135504b225335001102222135002225335333573466e3c00802411c1184c8488888ccc00403c01c019401c4c01800c4ccc09c02001c004888c88c8c8c8854cd4ccd5cd19b8950044800011c1184cccc088c8488888cccc00c03c03803401940100940380044cccc0894cd4ccd5cd19b8850035004047046133221222223333300201000f00e0070065003500410263024333302700900800750033500e2222333303733500c2333301900100c50085007250070030020010011333301300700533702a008a0026a01844440082a66a666ae68cdc4a801a8008220218a8018a800899981500580500089a80411111998178038028021110a99a999ab9a337106a01244002004082080203a2a66a666ae68cdc48011a804910010208200999980e01000f80400088911001889100089991091199998010058020018048039a8048011a80480091110999999806021005001000a99999a802099a82480200308031111099a82680400511111099a827004805911099a826003804a99a80188029099a82500080309a8009111001099119801000a81f990009aa81f911299a80108009109980280099a820801001990009aa81f11299a8008a81c1109a801111a80111299a999ab9a33712006900001d81e09a81f99aa81489199800801801002002898040029111299a999ab9a33712004900001b81b08008999980280200199b80333021004003001002001223225335333573466e240052000036035123003001133355005223500222350032253353302b004002133027003001103b33550230040030013200135503e2253350011503e2213500222350022253353302b00200a15335330270010091005133504333550290040033008005133504333550290040033008005112222333355005004220010013500f1223300233550240050040011122223355300c1200123500122335502400233350012001223300800200120013335550050040020011112223335530051200150393355300a1200123500122335502200235500a001333553005120012235002225335333553008120013500c500f235001223300a0020050061003133503d004003503a0013355300a120012350012232335502300330010053200135503f225335001135500b003221350022253353300c002008112223300200a004130060030023200135503822112225335001135003220012213335005220023004002333553007120010050040013200135503722112225335001100222133005002333553007120010050040011121222300300411212223001004123350022233350032200200200135001220011221233001003002320013550322211225335001150342213350353004002335530061200100400111233001225335002102a100102712335001502e502f122200222221222333300100700600500412200221223001003122222004222212333300100500400300223263202a335738921016f000062326320293357389201016f000052326320283357389201016f000042326320273357389201016f000032326320263357389201016f00002120013500222001350012200235555022122233003222533333333333500122153353330070050040021333007005004001101e2321300135004222200332001355028225335001101f2213500222533533012002007102413006003101c215335333006004003001101d101e2215335333007005004002101f1333007005004001101d221333573466e1cccc018014010008ccc01801401000407c078884ccd5cd19b8833300600500400233300600500400101e01f221333573466e24ccc018014010008ccc01801401000407807c884ccd5cd19b8933300600500400233300600500400101f01e221333573466e20ccc018014010008ccc01801401000407c0788894cccccccccccd4004884cdc01998030028020011998030028020009109a8021111199806803002802119098009a8021111001990009aa8141119a800a4000446a00444a66a6602400400e20022600c0064442a66a66601000c00a006266600e00c00a004266600e00c00a0024200244642a66a666ae68cdc3a800a400004003e29000099b84333007006005003500113330060050040012213370466600c00a00800466600c00a0080024266e0520003330050040030012213370266600c00a00800466600c00a00800226a0064400226a00644004464260026a0084444004640026aa0504466a0029000111a80111299a999ab9a3371e00400e04804620022600c006446446004002640026aa0444466a0029000111a801111a80111299a998078010050a99a9980580080488018980400289804002911a801111a80191299a999ab9a3371e0080040360342660180060022034444424666600200a00800600422442466002006004446a004446a00644a66a666ae68cdc780200100c00b899803801800880b9119a8011119a80191299a8020a99a801099803801800880b0a99a801080b099803801800900a919a8011100a919803001000911a801111a801911919a802919a8021299a999ab9a3371e0040020320302a00620304030466a00840304a66a666ae68cdc780100080c80c0a801880c0a99a80190a99a8011099a801119a801119a801119a801119806801000900d919a801100d91980680100091100d91119a802100d911299a999ab9a3370e00c00603c03a2a66a666ae68cdc380280100f00e899808002000880e880e880b0a99a8009080b080b11199ab9a3371e00400202202044666ae68cdc38010008080079a801110009a800910011aaaa80b09111980192999999a80091099ba548028cd5d0180500119aba030050013762034266e9520003762030444266e952004335740601600666ae80c018008cd5d018030009bb101b22213374a900419aba0300e00333574066a60182400201600466ae80c018004dd880d91111099ba548008cd5d0180900299aba033500423374a900019aba03013001376203c466e95200233574060260026ec4078cd5d0180780199aba0335300e1200100d00233574060100026ec40748884cdd2a400c66ae80dd3980280199aba0375000466ae80c018004dd880d9299a80089bb101822133574066a0044466e952000335740601600466ae80c01c004dd880e1119ba548008cd5d0180580119aba037520026ec4070c01000448888880148488c00400c8ccd400488cdd2a400466ae80c020008cd5d01ba730110013762028444466e952000335740601600866ae80c02c00ccd5d0180400119aba0335300712001006001376202c466e95200433574060060026ec404cc8004d54044894ccccccccccd4004884cdd2a400066ae80c010008cd5d018020009bb1014213374a900319aba030070013762026266e95201437620244266e95200433574060060026ec404c884cdd2a400466ae80c010008cd5d018020009bb101413374a90091bb10122213374a900819aba033530051200100400233574066a600a240020080026ec4050884cdd2a401066ae80cd4c01448004010008cd5d019a9802890008020009bb10142213374a900519aba033530051200100400233574066a600a240020080026ec4050884cdd2a401c66ae80cd4c01448004010008cd5d019a9802890008020009bb10142213374a900619aba033530051200100400233574066a600a240020080026ec4050c8004d54040884894cccccccccccd4004884cdd2a400c66ae80cd4c01848004010008cd5d019a9803090008020009bb10152213374a900019aba0300a002335740600e0026ec405484cdd2a401c66ae80c020004dd880a111099ba548058cd5d0180280199aba033530071200100500233574066a600e2400200a0026ec405884cdd2a400466ae80dd40009bb10142213374a900619aba033530061200100400233574066a600c240020080026ec4054884cdd2a401466ae80cd4c01848004010008cd5d019a9803090008020009bb1015213374a900219aba0335300512001003001376202844266e95200833574066a600c2400200800466ae80cd4c01848004010004dd880a899ba548048dd8809899ba548040dd88099099ba548050cd5d018038009bb1014235001223374a900019aba0375200466ae80dd48009bb101123374a900019aba037520026ec40388d400488cdd2a400066ae80dd480119aba03004001376201e466a0024466e952000335740a66a004266e952002376201c266e952000376201c66ae80d400488cdd2a400066ae80c02c008cd5d0299a8009099ba548000cd5d019a800919ba548000cd5d018068009bb10122223374a900119aba0375000666ae80dd400119aba037500026ec4050dd8808899ba548008dd88081bb1010376201c466e9520023357406ea4004dd88068910010910009109198008018010909118010018891000919a800919ba548000cd5d01ba9001376200e466e9520023357406ea4004dd880390911800801990009aa80211299a80089bb10052213357406a0044466e9520003357406ea0008cd5d01ba80013762012600800222440042442446600200800693089191800800911980198010010008888919918008009119091a99091980091a80191180100191a801911800801891a98018021a8020008009801001000a451c49076eab20243dc9462511fb98a9cfb719f86e9692288139b7c91df30001"

currentV1PayoutScriptCBOR :: ByteString
currentV1PayoutScriptCBOR = auditV1PayoutScriptCBOR

auditV1Scripts :: MarloweScripts
auditV1Scripts = MarloweScripts
  { marloweScript = "6a9391d6aa51af28dd876ebb5565b69d1e83e5ac7861506bd29b56b0"
  , payoutScript = "49076eab20243dc9462511fb98a9cfb719f86e9692288139b7c91df3"
  , marloweScriptUTxOs = Map.fromList
      [ ( mainnetNetworkId
        , ReferenceScriptUtxo
            { txOutRef = "c4aff1631174a4463981fad948f17edf8550bf6a9347822abed74917e074271a#1"
            , txOut = Chain.TransactionOutput
                { address = fromJust $ fromBech32 "addr1z9l4w7djneh0kss4drg2php6ynflsvmal7x3w5nrc95uvhz7e4q926apsvcd6kn33cpx95k8jsmrj7v0k62rczvz8urqrl2z0l"
                , assets = Assets 54922330 mempty
                , datum = Just $ Constr 0 []
                , datumHash = Nothing
                }
            , script = either (error . show) id $ deserialiseFromCBOR (AsPlutusScript AsPlutusScriptV2) auditV1MarloweScriptCBOR
            }
        )
      , ( preprodNetworkId
        , ReferenceScriptUtxo
            { txOutRef = "d1e488d70850fc36ef6971a65d1f45e2a7a433e4080e4c5c580d0b23094a955e#1"
            , txOut = Chain.TransactionOutput
                { address = fromJust $ fromBech32 "addr_test1vrw0tuh8l95thdqr65dmpcfqnmcw0en7v7vhgegck7gzqgswa07sw"
                , assets = Assets 54801650 mempty
                , datum = Just $ Constr 0 []
                , datumHash = Nothing
                }
            , script = either (error . show) id $ deserialiseFromCBOR (AsPlutusScript AsPlutusScriptV2) auditV1MarloweScriptCBOR
            }
        )
      , ( previewNetworkId
        , ReferenceScriptUtxo
            { txOutRef = "929b418dd69c1b9531fdd55039e8f12aa9d6f11a27b600a8e0d56c7e9f2851a0#1"
            , txOut = Chain.TransactionOutput
                { address = fromJust $ fromBech32 "addr_test1vrw0tuh8l95thdqr65dmpcfqnmcw0en7v7vhgegck7gzqgswa07sw"
                , assets = Assets 54801650 mempty
                , datum = Just $ Constr 0 []
                , datumHash = Nothing
                }
            , script = either (error . show) id $ deserialiseFromCBOR (AsPlutusScript AsPlutusScriptV2) auditV1MarloweScriptCBOR
            }
        )
      ]
  , payoutScriptUTxOs = Map.fromList
      [ ( mainnetNetworkId
        , ReferenceScriptUtxo
            { txOutRef = "c4aff1631174a4463981fad948f17edf8550bf6a9347822abed74917e074271a#2"
            , txOut = Chain.TransactionOutput
                { address = fromJust $ fromBech32 "addr1z9l4w7djneh0kss4drg2php6ynflsvmal7x3w5nrc95uvhz7e4q926apsvcd6kn33cpx95k8jsmrj7v0k62rczvz8urqrl2z0l"
                , assets = Assets 12555030 mempty
                , datum = Just $ Constr 0 []
                , datumHash = Nothing
                }
            , script = either (error . show) id $ deserialiseFromCBOR (AsPlutusScript AsPlutusScriptV2) auditV1PayoutScriptCBOR
            }
        )
      , ( preprodNetworkId
        , ReferenceScriptUtxo
            { txOutRef = "d1e488d70850fc36ef6971a65d1f45e2a7a433e4080e4c5c580d0b23094a955e#2"
            , txOut = Chain.TransactionOutput
                { address = fromJust $ fromBech32 "addr_test1vpa36uuyf95kxpcleldsncedlhjru6vdmh2vnpkdrsz4u6cll9zas"
                , assets = Assets 12434350 mempty
                , datum = Just $ Constr 0 []
                , datumHash = Nothing
                }
            , script = either (error . show) id $ deserialiseFromCBOR (AsPlutusScript AsPlutusScriptV2) auditV1PayoutScriptCBOR
            }
        )
      , ( previewNetworkId
        , ReferenceScriptUtxo
            { txOutRef = "929b418dd69c1b9531fdd55039e8f12aa9d6f11a27b600a8e0d56c7e9f2851a0#2"
            , txOut = Chain.TransactionOutput
                { address = fromJust $ fromBech32 "addr_test1vpa36uuyf95kxpcleldsncedlhjru6vdmh2vnpkdrsz4u6cll9zas"
                , assets = Assets 12434350 mempty
                , datum = Just $ Constr 0 []
                , datumHash = Nothing
                }
            , script = either (error . show) id $ deserialiseFromCBOR (AsPlutusScript AsPlutusScriptV2) auditV1PayoutScriptCBOR
            }
        )
      ]
  }

auditV1MarloweScriptCBOR :: ByteString
auditV1MarloweScriptCBOR = either (error . T.unpack) id $ decodeBase16 "5930d95930d60100003323232332232323233223233223232323232323232323232323232323232323232323232323232323232323232332233223232323232332232323232323232323232323233223322323232323232323232323232323232323232323232323232323232323232323232323232323232323322323232323232323232323232323232322322223232533533322235003223232235006232323232323223353235001223500223223355335333573466e2000400c2500424c044c0c4c8488c00400ccd542040400c00454cd4ccd5cd19b880015011094010930113031332212233002004003501133550810100300113322122330010040033355081015002001350122222333308401004003002500623030122222300200622533335333333305409501002001011006509e01509e01130311222220051303112222200313031122222004222221533500513333035004003002001153333335016221303803913501922225335333355307112001505f220a00100409f011303a03b133330390080070060052221303903a2221303903a222221303b03c2221303903a15335333573466e24005403c24804244045403c4004cc8848cc00400c0094cd4c8d400488d4008894ccd400884d4010894ccd400884d426804cd5421004cdc099b8000448008c0d4014cdc019b8100148008c0d40085426004542600454254045425404d4020888888888888014840044c98c826004cd5ce24901610007450062533333500113263209901335738921016900075132632099013357389201016e00075132632099013357389201016d0007521335001223263209c01335738921016b0007823263209b013357389201016a000771326320990133573892010175000752232225335533553353501122223335530691200135038503723500122333573466e2400520000990109a0100410930113357389201016200092011533533303208501500f353535500922002220012222003109301133573892101760009201109201153353335530651200135034503325333500122135002223011001222213011003109401500a15335333553065120013503450332350012233500222533533303705b00333355306a120015022235001222200333355306b120012253353308a0135002222200400313350a101002001100150a001500c109801133573892010170000970125335333553069120013506d5070235001222253335002109b012109c0121533533303c22333573466e200080042780427c0401002054cd54cd4cc0d4c8d400488cdd2a400066ae80dd480119aba037520026ec42a404cd542280407001c05c84cc23c040040084270044cc23404014cc27804c28804099427c04427004427005402c425c044cd5ce24810172000960150031533333350012215335355335333553068120012253353500222223308b015010004133509e010020011001509d015009130764988854cd40044008884c1e926222253335002109801210990121533533303908c01004333026027333026027501633355306c12001502425333500122150a5012222135002223350a801335508e010023350a801335508e0100100350a90150a901150a30150113304604733355306c12001502455028500a153355335330323043333044019009008014213308c0100100210990113308a01005500f1099011099011095011335738920101640009401153353335530651200135034503325335330840135001222200450091093011094015007109301133573892010163000920122215335355335333553069120012253353500222223308c015011004133509f010020011001509e01500a130784988854cd40044008884c1f1262222533350021099012109a0121533533303a08d01004333027028333027028501733355306d12001502525333500122150a6012222135002223350a901335508f010023350a901335508f0100100350aa0150aa01150a40150123304704833355306d12001502555029500b15335533533033304433304501a00a009015213308d01001002109a0113308b010055010109a01109a0110960113357389210164000950122215335355335333553069120012253353500222223308c015011004133509f010020011001509e01500a130794988854cd40044008884c1f5262222533350021099012109a0121533533303a08d01004333027028333027028501733355306d12001502525333500122150a6012222135002223350a901335508f010023350a901335508f0100100350aa0150aa01150a40150123304704833355306d12001502555029500b15335533533033304433304501a00a009015213308d01001002109a0113308b010055010109a01109a01109601133573892101640009501222221533535533533355306b120012253353500222223308e01501300413350a101002001100150a001500c1307c4988854cd40044008884c2000526222253335002109b012109c0121533533303c08f0100433302902a33302902a501933355306f12001502725333500122150a8012222135002223350ab013355091010023350ab0133550910100100350ac0150ac01150a60150143304904a33355306f1200150275502b500d15335533533035304633304701c00c00b017213308f01001002109c0113308d010055012109c01109c0110980113357389210164000970122215335355335333553069120012253353500222223308c015011004133509f010020011001509e01500a1307b4988854cd40044008884c1fd262222533350021099012109a0121533533303a08d01004333027028333027028501733355306d12001502525333500122150a6012222135002223350a901335508f010023350a901335508f0100100350aa0150aa01150a40150123304704833355306d12001502555029500b15335533533033304433304501a00a009015213308d01001002109a0113308b010055010109a01109a0110960113357389210164000950110920110920110920113335530621200132335068335506108001001509901501b23500122223350032509e01235003225335333573466e2401120000970109801133509f0133550850100333509f0133550850100233509f0133550850100100450a00150a00150a001150a00100113500622222222222200a13550012200113553353500a22350022222222222223333500d2509b012509b012509b01233355306b1200150322533535001223304700200413509d010011509c0100d21533533355305e120012253353500322350012222350042233500220950123500b223500122223500422335002209e012330900100a00113350940100200110015093013500522222222222200c130474988854cd40044008884c12d261326320940133573892101780007022350012222335507d53353501022350022222222222223333500d250a101250a101250a10123335530711200150382533535001223304d0020041350a301001150a20100d2153353335530641200122533535003223500122223500422335002209b0123500b22350012222350042233500220a4012330960100a001133509a0100200110015099013500b22222222222200c1304e4988854cd40044008884c1492613263209a0133573892101780007600413355306112001233500122200320015001133553060120012335001212230010032232533535006222222222222300d002213212233300200700600330300011326320960133573892101680007232001355095012253350011508f0122135002225335333573466e3c00801c24404240044d4250040044c01800c0248cd4004894cd4d400488cd40088d401c8888888888894cd4ccd54c1ac4800540c894cd4ccd5cd19b8f00e00109a010990113509d010011509c010042109a01109801208c01108a011335738921017300089012533533302804c33509001335507600833509001335507600148009424405424404d400c888888888888ccd54c19c48005407c8d400488d4004888800c0304224044cd5ce24810174000880113233355305712001500f235001223500222350012233509301335507900233509301335507900100550940150940100135002222200413500122220013232323333573466e1cd55cea801a4000466605864646666ae68cdc39aab9d5001480008dd71aba135573ca004464c6411e0266ae700f01ac234044dd50009aba1500332323232323333573466e1cd55cea80224000466660e8666aa034464646666ae68cdc39aab9d5002480008cd541e4c0f0d5d0a80118211aba135744a004464c6412c0266ae7010c1c8250044d55cf280089baa00175a6ae854010ccd540680ddd69aba150033335501a03075a6ae854008dd69aba135744a004464c641240266ae700fc1b8240044d5d1280089aba25001135573ca00226ea8004d5d0a80118129aba135744a004464c641180266ae700e41a0228044d5d1280089aab9e50011375400a600c0086666ae68cdc39aab9d5002480008cc8848cc00400c008c8c8c8c8c8c8c8c8c8c8c8c8c8cccd5cd19b8735573aa018900011999999999999111111111110919999999999980080680600580500480400380300280200180119a81900e1aba1500c33503201c35742a01666a06403a6ae854028ccd5407dd7280f1aba150093335501f75ca03c6ae854020cd40c808cd5d0a803999aa80f8203ad35742a00c6464646666ae68cdc39aab9d5002480008cc8848cc00400c008c8c8c8cccd5cd19b8735573aa004900011991091980080180119a8163ad35742a00460946ae84d5d1280111931904f8099ab9c04c07b09d01135573ca00226ea8004d5d0a8011919191999ab9a3370e6aae754009200023322123300100300233502c75a6ae854008c128d5d09aba2500223263209f013357380980f613a0226aae7940044dd50009aba135744a004464c641360266ae701201dc264044d55cf280089baa00135742a00a66a064eb8d5d0a802199aa80f81010009aba150033335501f75c40026ae854008c088d5d09aba25002232632097013357380880e612a0226ae8940044d5d1280089aba25001135744a00226ae8940044d5d1280089aba25001135744a00226ae8940044d5d1280089aab9e5001137540026ae854008c048d5d09aba250022326320890133573806c0ca10e0220c8264c641100266ae7124010350543500064135573ca00226ea8004d40748c8c8c8cccd5cd19b875001480088cc88488cc00401000cc0acd5d0a8019bae357426ae89400c8cccd5cd19b875002480008c8488c00800cc0b0d5d09aab9e50052326320880133573806a0c810c0210a0226aae7540084d55cf280089baa001133504d5001507e130010022223355304f12001235001223355067002335530521200123500122335506a002333500123300a4800000488cc02c0080048cc02800520000013301900200122337000040022246a00244002464646666ae68cdc39aab9d5002480008cc8848cc00400c008c024d5d0a80118029aba135744a004464c640fe66ae700b016c1f44d55cf280089baa0012323232323333573466e1cd55cea8022400046666444424666600200a008006004604e6ae854010ccd54021d728039aba150033232323333573466e1d4005200423212223002004357426aae79400c8cccd5cd19b875002480088c84888c004010dd71aba135573ca00846666ae68cdc3a801a400042444006464c6410c0266ae700cc1882100420c04208044d55cea80089baa00135742a00466a050eb8d5d09aba250022326320800133573805a0b80fc26ae8940044d5d1280089aab9e500113754002266aa002eb9d6889119118011bab0013200135507a223233335573e0044a0f8466a0f666aa0c2600c6aae754008c014d55cf280118021aba2003059135742002464646666ae68cdc3a800a400c46424444600800a600e6ae84d55cf280191999ab9a3370ea004900211909111180100298129aba135573ca00846666ae68cdc3a801a400446424444600200a600e6ae84d55cf280291999ab9a3370ea00890001190911118018029bae357426aae7940188c98c81f8cd5ce01582d03e03d83d03c89aab9d500113754002464646666ae68cdc39aab9d5002480008cc8848cc00400c008c014d5d0a8011bad357426ae8940088c98c81e8cd5ce01382b03c09aab9e5001137540024646666ae68cdc39aab9d5001480008dd71aba135573ca004464c640f066ae700941501d84dd5000919191919191999ab9a3370ea002900610911111100191999ab9a3370ea004900510911111100211999ab9a3370ea00690041199109111111198008048041bae35742a00a6eb4d5d09aba2500523333573466e1d40112006233221222222233002009008375c6ae85401cdd71aba135744a00e46666ae68cdc3a802a400846644244444446600c01201060506ae854024dd71aba135744a01246666ae68cdc3a8032400446424444444600e01060526ae84d55cf280591999ab9a3370ea00e900011909111111180280418151aba135573ca018464c641020266ae700b81741fc1f81f41f01ec1e81e44d55cea80209aab9e5003135573ca00426aae7940044dd500089119191999ab9a3370ea00290021091100091999ab9a3370ea00490011190911180180218031aba135573ca00846666ae68cdc3a801a400042444004464c640f466ae7009c1581e01dc1d84d55cea80089baa0012235001222222222222533533355304812001500f235001225335333573466ebc0040441e41e04d41f000c541ec00884d41e8d400488008541e04cd40f8894cd40088400c400541a48488c00800c8888488cccc00401801401000c4888880048488c00800c8cd4005200248000888ccd54c0d848004d401540108d400488ccd54c0e448004d4021401c8d400488ccd40048cc0292000001223300b00200123300a00148000004cc018008004448cc004894cd40084004418818448cd40dc88ccd400c88008008004d40048800488cd54c0e0480048d400488cd54140008ccd40048cd54c0f0480048d400488cd54150008d540f000400488ccd5540d81580080048cd54c0f0480048d400488cd54150008d540ec004004ccd5540c4144008004c8004d5419c88c8c8c8c8c8c8c8c8c8c8c8c8c8cccd5cd19b875001480288cc884888888cc01802001cc04cd5d0a80198081aba135744a00646666ae68cdc3a801240104666444244444466600601201000e602c6ae854018cd4c05448004050d5d0a80298089aba135744a00a46666ae68cdc3a801a400c4666444244444466600201201000e66a0284646464646666ae68cdc3a800a4004466442446600200800660326ae85400cdd71aba135744a00646666ae68cdc3a80124000466442446600400800660346ae854014c064d5d09aba250052326320800133573805a0b80fc0fa26aae75400c4d55cf280109aab9e5001137540026ae854024dd69aba150083012357426ae8940208cccd5cd19b875004480108ccc8884888888ccc01002402001cc058d5d0a80618099aba1500b3013357426ae89402c8cccd5cd19b875005480088ccccc888884888888ccccc00802c02802402001cc084d5d0a8089919191999ab9a3370ea00290011183618129aba135573ca00646666ae68cdc3a801240004642446004006604c6ae84d55cf28021193190400099ab9c02d05c07e07d135573aa00226ea8004d5d0a80818139aba1500f33530181200101735742a01c60286ae84d5d1280711999ab9a3370ea00c9000103411931903e19ab9c02905807a079078077076075135573aa01826aae79402c4d5d1280089aab9e5009135744a00226aae79401c4d5d1280089aab9e5005135744a00226ae8940044d5d1280089aab9e50011375400246464646464646666ae68cdc3a800a40084642444600200860146ae84d55cf280391999ab9a3370ea004900111991091119801802802180a1aba1500433500a232323333573466e1cd55cea801240004664424660020060046eb4d5d0a8011bad357426ae8940088c98c81cccd5ce01002783889aab9e5001137540026ae84d5d1280211999ab9a3370ea006900011999911109111999801003803002802180b1aba15008301635742a00e60386ae854018cd4c03448004030d5d09aba2500623263207033573803a0980dc0da0d826aae7540144d55cf280209aba25001135744a00226aae7940044dd50008919118011bac001320013550662233335573e0024a0ce466a0cc60086ae84008c00cd5d1001022190009aa832111919191919191919191999ab9a3370ea002900a109111111111100491999ab9a3370ea0049009109111111111100311999ab9a3370ea0069008119910911111111111980280680619a9807890008071aba15005335300f1200100e357426ae8940148cccd5cd19b875004480388cc88488888888888cc008034030cd4c0404800403cd5d0a80399a9808090008079aba135744a00e46666ae68cdc3a802a4018466442444444444446600201a01866a6022240020206ae854024cd4c04448004040d5d09aba2500923333573466e1d4019200a233221222222222223300300d00c33530121200101135742a01666a6024240020226ae84d5d1280591999ab9a3370ea00e9004119910911111111111980200680619a9809890008091aba1500d335301312001012357426ae8940348cccd5cd19b875008480188c8488888888888c028030c070d5d09aab9e501123333573466e1d40252004232122222222222300800c3014357426aae7940488cccd5cd19b87500a480088cc88488888888888cc01c034030c054d5d0a808980a9aba135744a02246666ae68cdc3a805a4000466442444444444446601601a018602c6ae85404cc058d5d09aba2501323263207a33573804e0ac0f00ee0ec0ea0e80e60e40e20e00de0dc26aae7540204d55cf280389aab9e5006135573ca00a26aae7940104d55cf280189aab9e5002135573ca00226ea8004c8004d5418c88488c8c8c8c8c8c8c8c8c8cccd5cd19b875001480588ccc8884888888888888ccc02403c038034c030d5d0a80219a9807090008061aba15003335300e1200100c357426ae89400c8cccd5cd19b875002480508c84888888888888c004034c040d5d09aab9e500b23333573466e1d400d20122122222222222200323333573466e1d401120102122222222222200223333573466e1d4015200e2321222222222222300a00d301a357426aae7940388cccd5cd19b875006480308cc884888888888888cc01c038034cd4c04c48004044d5d0a80519a9809890008089aba135744a01446666ae68cdc3a803a40144664424444444444446600c01c01a66a6028240020246ae854030cd4c05048004048d5d09aba2500c23333573466e1d402120082332212222222222223300400e00d33530151200101335742a01c66a602a240020266ae84d5d1280711999ab9a3370ea01290031199109111111111111980600700699a980b0900080a1aba15010335301612001014357426ae8940408cccd5cd19b87500a480108c84888888888888c014034cd4c05c48004054d5d09aab9e501323333573466e1d402d20022321222222222222300800d375a6ae84d55cf280a11999ab9a3370ea01890001199109111111111111980580700698111aba150143028357426ae8940508c98c81f0cd5ce01482c03d03c83c03b83b03a83a03983903883803789aab9d5008135744a00226aae7940184d55cf280289aab9e5004135573ca00626aae7940084d55cf280089baa0012323333573466e1cd55cea800a400046eb8d5d09aab9e50022326320653357380240820c626ea80048d4004888cdd2a400066ae80cdd2a400066ae80dd48019bb10643357406a004444466e9520003357406e98c05c010cd5d01ba630180033357406e98c064008cd5d01ba800137620d066ae80c13c004dd88321110919980080200180111299a999ab9a3371e6a004440046a002440040ae0ac2666ae68cdc39a801110009a8009100082b82b082b1119aa98170900091a8009119aa82300119aa98188900091a8009119aa82480119b82008001001001480048c8c8c8c8c8c8cccd5cd19b87500148010848880048cccd5cd19b875002480088cc884888cc00c014010c028d5d0a8021bad357426ae8940108cccd5cd19b875003480008cccc88884888cccc00801c018014010c030d5d0a80418061aba15007301235742a00c6eb4d5d09aba250062326320663357380260840c80c60c426aae7540144d55cf280209aba25001135744a00226aae7940044dd5000919191999ab9a3370e6aae7540092000233221233001003002375c6ae854008c014d5d09aba2500223263205f3357380180760ba26aae7940044dd500091919191999ab9a3370ea002900111909118008019bae357426aae7940108cccd5cd19b875002480008cc88488cc00801000cc02cd5d0a80218039aba135744a008464c640c066ae700340f01781744d55cea80109aab9e500113754002464646666ae68cdc39aab9d5002480008cc150c01cd5d0a80119a8028031aba135744a004464c640ba66ae700280e416c4d55cf280089baa00112232323333573466e1d400520002350563005357426aae79400c8cccd5cd19b87500248008941588c98c8178cd5ce00581d02e02d89aab9d5001137540024646464646666ae68cdc3a800a4004466644424466600200a0080066eb4d5d0a8021bad35742a0066eb4d5d09aba2500323333573466e1d4009200023212230020033008357426aae7940188c98c8178cd5ce00581d02e02d89aab9d5003135744a00226aae7940044dd5000919191999ab9a3370ea00290011182a9bae357426aae79400c8cccd5cd19b875002480008c8488c00800cdd71aba135573ca008464c640b666ae700200dc1641604d55cea80089baa0012323333573466e1d40052002204e23333573466e1d40092000204e23263205933573800c06a0ae0ac26aae74dd5000919191999ab9a3370e6aae7540092000233221233001003002375c6ae854008dd71aba135744a004464c640b066ae700140d01584d55cf280089baa00149103505431003200135505222533500115005221350022233574066ec0d400888cdd2a400066ae80c138008cd5d018258009bb10593750002600c006640026aa0a244a66a0022a0084426a0044466ae80cdd818250011ba800130060033200135505022533500115003221350022233574066ec0c120008dd4000980300189bb204e23263204f33573892101770002b23263204e335738920101770002a3200135504c22222222533533333301404900600500450525052222221533500813332221222233333001007006005009008533500c104f10053335530221200150563500e0040073335530221200150560030062215333333500322101c101a222101d222101d22222101f22215333533330150100070050032221333333301505701300200100733355302a12001505e53350031505f222213503512233002122222333300400b00a00900800133355302a12001505e3501600c00f33355302a12001505e00b00e112222003101d112222004123333553014120015002225333335002133504b12222200500110012222133504f12222233330030090080070060052222213350501222223333300200a009008007006006222133504e122222333001008007006004001504a13350172223003300200120013200135504922222533500111222001232232133500422300300222300300223350062225335333300d00b00a003004221330080020011333300c00b00a00900525335333300b009008001002221330060020011333300a0090080070032233500522233500622012225335333573466e3c01000413012c4ccc04c01c01800c40488cd401088ccc0440140100048804088894ccd4008884ccd400c894cd4cc0d001000854cd4ccd54c06048004d4071407c8d4004894cd4ccd5cd19b8800600204804913300c006001104800113300b00e3500722223333036004333355019038008007003002001100a100a222200c20092222133350052200c22225335330390080041533533039007003153353303500600215335333573466e1c014ccc0c403002c0041281244cc03d4cd4ccd5cd19b890054800012412840484488cccc00401401801001cd402c8888cccc0e8cccc06c03002802401000c0080044038403840384038802c4ccd400488020888802894cd4ccc0ac0140100044cc02002c010401c88ccd5cd19b8900200103f03e22122330020040031220012221222333003006005004122200212200212222002320013550402222322225333553333335003221333301b5335333028008007002101f112222200501e00700113500522225335300e00421350012235002222333302302730253333028003303f003002001333303400400900800703e101e2221333301c02001f00853353330290090080031002100122323221333301e300250090213500a222233330330040033333550160380095007500d0010013200135504b225335001102222135002225335333573466e3c00802411c1184c8488888ccc00403c01c019401c4c01800c4ccc09c02001c004888c88c8c8c8854cd4ccd5cd19b8950044800011c1184cccc088c8488888cccc00c03c03803401940100940380044cccc0894cd4ccd5cd19b8850035004047046133221222223333300201000f00e0070065003500410263024333302700900800750033500e2222333303733500c2333301900100c50085007250070030020010011333301300700533702a008a0026a01844440082a66a666ae68cdc4a801a8008220218a8018a800899981500580500089a80411111998178038028021110a99a999ab9a337106a01244002004082080203a2a66a666ae68cdc48011a804910010208200999980e01000f80400088911001889100089991091199998010058020018048039a8048011a80480091110999999806021005001000a99999a802099a82480200308031111099a82680400511111099a827004805911099a826003804a99a80188029099a82500080309a8009111001099119801000a81f990009aa81f911299a80108009109980280099a820801001990009aa81f11299a8008a81c1109a801111a80111299a999ab9a33712006900001d81e09a81f99aa81489199800801801002002898040029111299a999ab9a33712004900001b81b08008999980280200199b80333021004003001002001223225335333573466e240052000036035123003001133355005223500222350032253353302b004002133027003001103b33550230040030013200135503e2253350011503e2213500222350022253353302b00200a15335330270010091005133504333550290040033008005133504333550290040033008005112222333355005004220010013500f1223300233550240050040011122223355300c1200123500122335502400233350012001223300800200120013335550050040020011112223335530051200150393355300a1200123500122335502200235500a001333553005120012235002225335333553008120013500c500f235001223300a0020050061003133503d004003503a0013355300a120012350012232335502300330010053200135503f225335001135500b003221350022253353300c002008112223300200a004130060030023200135503822112225335001135003220012213335005220023004002333553007120010050040013200135503722112225335001100222133005002333553007120010050040011121222300300411212223001004123350022233350032200200200135001220011221233001003002320013550322211225335001150342213350353004002335530061200100400111233001225335002102a100102712335001502e502f122200222221222333300100700600500412200221223001003122222004222212333300100500400300223263202a335738921016f000062326320293357389201016f000052326320283357389201016f000042326320273357389201016f000032326320263357389201016f00002120013500222001350012200235555022122233003222533333333333500122153353330070050040021333007005004001101e2321300135004222200332001355028225335001101f2213500222533533012002007102413006003101c215335333006004003001101d101e2215335333007005004002101f1333007005004001101d221333573466e1cccc018014010008ccc01801401000407c078884ccd5cd19b8833300600500400233300600500400101e01f221333573466e24ccc018014010008ccc01801401000407807c884ccd5cd19b8933300600500400233300600500400101f01e221333573466e20ccc018014010008ccc01801401000407c0788894cccccccccccd4004884cdc01998030028020011998030028020009109a8021111199806803002802119098009a8021111001990009aa8141119a800a4000446a00444a66a6602400400e20022600c0064442a66a66601000c00a006266600e00c00a004266600e00c00a0024200244642a66a666ae68cdc3a800a400004003e29000099b84333007006005003500113330060050040012213370466600c00a00800466600c00a0080024266e0520003330050040030012213370266600c00a00800466600c00a00800226a0064400226a00644004464260026a0084444004640026aa0504466a0029000111a80111299a999ab9a3371e00400e04804620022600c006446446004002640026aa0444466a0029000111a801111a80111299a998078010050a99a9980580080488018980400289804002911a801111a80191299a999ab9a3371e0080040360342660180060022034444424666600200a00800600422442466002006004446a004446a00644a66a666ae68cdc780200100c00b899803801800880b9119a8011119a80191299a8020a99a801099803801800880b0a99a801080b099803801800900a919a8011100a919803001000911a801111a801911919a802919a8021299a999ab9a3371e0040020320302a00620304030466a00840304a66a666ae68cdc780100080c80c0a801880c0a99a80190a99a8011099a801119a801119a801119a801119806801000900d919a801100d91980680100091100d91119a802100d911299a999ab9a3370e00c00603c03a2a66a666ae68cdc380280100f00e899808002000880e880e880b0a99a8009080b080b11199ab9a3371e00400202202044666ae68cdc38010008080079a801110009a800910011aaaa80b09111980192999999a80091099ba548028cd5d0180500119aba030050013762034266e9520003762030444266e952004335740601600666ae80c018008cd5d018030009bb101b22213374a900419aba0300e00333574066a60182400201600466ae80c018004dd880d91111099ba548008cd5d0180900299aba033500423374a900019aba03013001376203c466e95200233574060260026ec4078cd5d0180780199aba0335300e1200100d00233574060100026ec40748884cdd2a400c66ae80dd3980280199aba0375000466ae80c018004dd880d9299a80089bb101822133574066a0044466e952000335740601600466ae80c01c004dd880e1119ba548008cd5d0180580119aba037520026ec4070c01000448888880148488c00400c8ccd400488cdd2a400466ae80c020008cd5d01ba730110013762028444466e952000335740601600866ae80c02c00ccd5d0180400119aba0335300712001006001376202c466e95200433574060060026ec404cc8004d54044894ccccccccccd4004884cdd2a400066ae80c010008cd5d018020009bb1014213374a900319aba030070013762026266e95201437620244266e95200433574060060026ec404c884cdd2a400466ae80c010008cd5d018020009bb101413374a90091bb10122213374a900819aba033530051200100400233574066a600a240020080026ec4050884cdd2a401066ae80cd4c01448004010008cd5d019a9802890008020009bb10142213374a900519aba033530051200100400233574066a600a240020080026ec4050884cdd2a401c66ae80cd4c01448004010008cd5d019a9802890008020009bb10142213374a900619aba033530051200100400233574066a600a240020080026ec4050c8004d54040884894cccccccccccd4004884cdd2a400c66ae80cd4c01848004010008cd5d019a9803090008020009bb10152213374a900019aba0300a002335740600e0026ec405484cdd2a401c66ae80c020004dd880a111099ba548058cd5d0180280199aba033530071200100500233574066a600e2400200a0026ec405884cdd2a400466ae80dd40009bb10142213374a900619aba033530061200100400233574066a600c240020080026ec4054884cdd2a401466ae80cd4c01848004010008cd5d019a9803090008020009bb1015213374a900219aba0335300512001003001376202844266e95200833574066a600c2400200800466ae80cd4c01848004010004dd880a899ba548048dd8809899ba548040dd88099099ba548050cd5d018038009bb1014235001223374a900019aba0375200466ae80dd48009bb101123374a900019aba037520026ec40388d400488cdd2a400066ae80dd480119aba03004001376201e466a0024466e952000335740a66a004266e952002376201c266e952000376201c66ae80d400488cdd2a400066ae80c02c008cd5d0299a8009099ba548000cd5d019a800919ba548000cd5d018068009bb10122223374a900119aba0375000666ae80dd400119aba037500026ec4050dd8808899ba548008dd88081bb1010376201c466e9520023357406ea4004dd88068910010910009109198008018010909118010018891000919a800919ba548000cd5d01ba9001376200e466e9520023357406ea4004dd880390911800801990009aa80211299a80089bb10052213357406a0044466e9520003357406ea0008cd5d01ba80013762012600800222440042442446600200800693089191800800911980198010010008888919918008009119091a99091980091a80191180100191a801911800801891a98018021a8020008009801001000a451c49076eab20243dc9462511fb98a9cfb719f86e9692288139b7c91df30001"

auditV1PayoutScriptCBOR :: ByteString
auditV1PayoutScriptCBOR = either (error . T.unpack) id $ decodeBase16 "590a73590a70010000332323232323232323232323232323322323232323222223232533533300632323333573466e1cd55cea80124000466aa0226eb8d5d0a8011bae357426ae8940088c98c8070cd5ce00e80e00d09aab9e50011375400a6666ae68cdc39aab9d37540089000100d11931900d19ab9c01b01a0183333573466e1cd55cea80124000466442466002006004646464646464646464646464646666ae68cdc39aab9d500c480008cccccccccccc88888888888848cccccccccccc00403403002c02802402001c01801401000c008cd405805cd5d0a80619a80b00b9aba1500b33501601835742a014666aa034eb94064d5d0a804999aa80d3ae501935742a01066a02c0446ae85401cccd5406808dd69aba150063232323333573466e1cd55cea801240004664424660020060046464646666ae68cdc39aab9d5002480008cc8848cc00400c008cd40b5d69aba15002302e357426ae8940088c98c80c0cd5ce01881801709aab9e5001137540026ae854008c8c8c8cccd5cd19b8735573aa004900011991091980080180119a816bad35742a004605c6ae84d5d1280111931901819ab9c03103002e135573ca00226ea8004d5d09aba2500223263202c33573805a05805426aae7940044dd50009aba1500533501675c6ae854010ccd5406807c8004d5d0a801999aa80d3ae200135742a00460426ae84d5d1280111931901419ab9c029028026135744a00226ae8940044d5d1280089aba25001135744a00226ae8940044d5d1280089aba25001135744a00226ae8940044d55cf280089baa00135742a00460226ae84d5d1280111931900d19ab9c01b01a018101913263201933573892010350543500019135573ca00226ea800448c88c008dd6000990009aa80a911999aab9f0012500a233500930043574200460066ae880080548c8c8cccd5cd19b8735573aa004900011991091980080180118069aba150023005357426ae8940088c98c8054cd5ce00b00a80989aab9e5001137540024646464646666ae68cdc39aab9d5004480008cccc888848cccc00401401000c008c8c8c8cccd5cd19b8735573aa0049000119910919800801801180b1aba15002335010015357426ae8940088c98c8068cd5ce00d80d00c09aab9e5001137540026ae854010ccd54021d728039aba150033232323333573466e1d4005200423212223002004357426aae79400c8cccd5cd19b875002480088c84888c004010dd71aba135573ca00846666ae68cdc3a801a400042444006464c6403866ae700740700680640604d55cea80089baa00135742a00466a018eb8d5d09aba2500223263201633573802e02c02826ae8940044d5d1280089aab9e500113754002266aa002eb9d6889119118011bab00132001355012223233335573e0044a010466a00e66aa012600c6aae754008c014d55cf280118021aba20030131357420022244004244244660020080062244246600200600424464646666ae68cdc3a800a40004642446004006600a6ae84d55cf280191999ab9a3370ea0049001109100091931900819ab9c01101000e00d135573aa00226ea80048c8c8cccd5cd19b875001480188c848888c010014c01cd5d09aab9e500323333573466e1d400920042321222230020053009357426aae7940108cccd5cd19b875003480088c848888c004014c01cd5d09aab9e500523333573466e1d40112000232122223003005375c6ae84d55cf280311931900819ab9c01101000e00d00c00b135573aa00226ea80048c8c8cccd5cd19b8735573aa004900011991091980080180118029aba15002375a6ae84d5d1280111931900619ab9c00d00c00a135573ca00226ea80048c8cccd5cd19b8735573aa002900011bae357426aae7940088c98c8028cd5ce00580500409baa001232323232323333573466e1d4005200c21222222200323333573466e1d4009200a21222222200423333573466e1d400d2008233221222222233001009008375c6ae854014dd69aba135744a00a46666ae68cdc3a8022400c4664424444444660040120106eb8d5d0a8039bae357426ae89401c8cccd5cd19b875005480108cc8848888888cc018024020c030d5d0a8049bae357426ae8940248cccd5cd19b875006480088c848888888c01c020c034d5d09aab9e500b23333573466e1d401d2000232122222223005008300e357426aae7940308c98c804ccd5ce00a00980880800780700680600589aab9d5004135573ca00626aae7940084d55cf280089baa0012323232323333573466e1d400520022333222122333001005004003375a6ae854010dd69aba15003375a6ae84d5d1280191999ab9a3370ea0049000119091180100198041aba135573ca00c464c6401866ae700340300280244d55cea80189aba25001135573ca00226ea80048c8c8cccd5cd19b875001480088c8488c00400cdd71aba135573ca00646666ae68cdc3a8012400046424460040066eb8d5d09aab9e500423263200933573801401200e00c26aae7540044dd500089119191999ab9a3370ea00290021091100091999ab9a3370ea00490011190911180180218031aba135573ca00846666ae68cdc3a801a400042444004464c6401466ae7002c02802001c0184d55cea80089baa0012323333573466e1d40052002212200223333573466e1d40092000212200123263200633573800e00c00800626aae74dd5000a4c240029201035054310011232300100122330033002002001323233223232323232332232323233223232322223500322323233355300e12001350145013235001223335530111200135017501623500122333500123301d4800000488cc0780080048cc074005200000133008002001323500122222222222233355301a12001335021223355301b120012350012233550230023355301e12001235001223355026002333500123302e4800000488cc0bc0080048cc0b8005200000133016002001501d2350012235001222200300c350042200233500e335501000233500e335501000148009403d403c88cd54c01c480048d400488cd5403c008ccd40048cd54c02c480048d400488cd5404c008d5403400400488ccd5540200380080048cd54c02c480048d400488cd5404c008d54030004004ccd55400c024008004444888ccd54c010480054028cd54c01c480048d400488cd5403c008d54024004ccd54c0104800488d4008894cd4ccd54c03048004c8cd405088ccd400c88008008004d40048800448cc004894cd4008406440040588d400488cc028008014018400c4cd403801000d402c004cd54c01c480048d400488c8cd5404000cc004014c8004d5405c894cd40044d5402800c884d4008894cd4cc03000802044888cc0080280104c01800c008c8004d5404088448894cd40044008884cc014008ccd54c01c480040140100044484888c00c0104484888c004010c8004d540348844894cd400454020884cd4024c010008cd54c01848004010004c8004d5403088448894cd40044d400c88004884ccd401488008c010008ccd54c01c4800401401000488ccd5cd19b8f00200100b00a11220021221223300100400311221233001003002112330012253350021001100700612335002223335003220020020013500122001122123300100300222333573466e2400800401000c48800848800488cdc0001000889191800800911980198010010009"

-- | The set of known script hash sets for Marlowe V1.
v1Scripts :: Set MarloweScripts
v1Scripts = Set.fromList [currentV1Scripts, auditV1Scripts]

-- | Key a set of script hash sets by their Marlowe script hashes.
toScriptMap :: Set MarloweScripts -> Map ScriptHash MarloweScripts
toScriptMap  = Map.mapKeys marloweScript . Map.fromSet id

-- | The map of script hash sets for Marlowe V1 keyed by their Marlowe script
-- hash.
v1ScriptMap :: Map ScriptHash MarloweScripts
v1ScriptMap = toScriptMap v1Scripts

-- | Lookup the Marlowe version and script hash set associated with the given
-- Marlowe script hash.
getMarloweVersion :: ScriptHash -> Maybe (SomeMarloweVersion, MarloweScripts)
getMarloweVersion hash = asum
  [ (SomeMarloweVersion MarloweV1,) <$> Map.lookup hash v1ScriptMap
  ]

-- | Get the set of known script hash sets associated with the given Marlowe
-- version.
--
-- NOTE Membership of the current script addresses is enforced in the test
-- suite.
getScripts :: MarloweVersion v -> Set MarloweScripts
getScripts = \case
  MarloweV1 -> v1Scripts

-- | Get the current script hash set for the given Marlowe version as of the
-- current git commit.
--
-- NOTE: Enforced in the test suite.
getCurrentScripts :: MarloweVersion v -> MarloweScripts
getCurrentScripts = \case
  MarloweV1 -> currentV1Scripts
