apiVersion: core.oam.dev/v1beta1
kind: Application
metadata:
  name: marlowe-runtime-database
  namespace: marlowe-staging
spec:
  components:
    - type: "postgres-cluster"
      name: marlowe-runtime-database
      properties:
        replicas: 3
        databases:
          {{- range .Values.networks }}
          chain-sync-{{ . }}: chain-sync-{{ . }}
          {{- end }}
        users:
          {{- range .Values.networks }}
          chain-sync-{{ . }}: []
          {{- end }}
